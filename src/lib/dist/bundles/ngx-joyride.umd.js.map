{"version":3,"file":"ngx-joyride.umd.js","sources":["../../src/models/joyride-step.class.ts","../../src/services/joyride-steps-container.service.ts","../../src/services/joyride-options.service.ts","../../src/services/logger.service.ts","../../src/models/joyride-error.class.ts","../../src/services/dom.service.ts","../../src/services/templates.service.ts","../../src/directives/joyride.directive.ts","../../src/services/document.service.ts","../../src/services/joyride-backdrop.service.ts","../../src/services/event-listener.service.ts","../../src/components/step/joyride-step.component.ts","../../src/services/step-drawer.service.ts","../../src/services/joyride-step.service.ts","../../../../node_modules/tslib/tslib.es6.js","../../../../node_modules/rxjs/_esm5/internal/util/errorObject.js","../../../../node_modules/rxjs/_esm5/internal/util/tryCatch.js","../../../../node_modules/rxjs/_esm5/internal/util/isFunction.js","../../../../node_modules/rxjs/_esm5/internal/config.js","../../../../node_modules/rxjs/_esm5/internal/util/hostReportError.js","../../../../node_modules/rxjs/_esm5/internal/Observer.js","../../../../node_modules/rxjs/_esm5/internal/util/isArray.js","../../../../node_modules/rxjs/_esm5/internal/util/isObject.js","../../../../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","../../../../node_modules/rxjs/_esm5/internal/Subscription.js","../../../../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","../../../../node_modules/rxjs/_esm5/internal/Subscriber.js","../../../../node_modules/rxjs/_esm5/internal/symbol/observable.js","../../../../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","../../../../node_modules/rxjs/_esm5/internal/util/EmptyError.js","../../../../node_modules/rxjs/_esm5/internal/operators/finalize.js","../../../../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","../../../../node_modules/rxjs/_esm5/internal/util/TimeoutError.js","../../../../node_modules/rxjs/_esm5/internal/operators/windowToggle.js","../../src/models/joyride-step-info.class.ts","../../src/services/joyride.service.ts","../../src/components/button/button.component.ts","../../src/components/close-button/close-button.component.ts","../../src/components/arrow/arrow.component.ts","../../src/joyride.module.ts"],"sourcesContent":["import { ViewContainerRef, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { JoyrideStepComponent } from '../components/step/joyride-step.component';\r\nimport { ReplaySubject } from 'rxjs';\r\n\r\nexport class JoyrideStep {\r\n    constructor() {\r\n        this.title = new ReplaySubject<string>();\r\n        this.text = new ReplaySubject<string>();\r\n    }\r\n    name: string;\r\n    route: string;\r\n    position: string;\r\n    title: ReplaySubject<string>;\r\n    text: ReplaySubject<string>;\r\n    stepContent: TemplateRef<any>;\r\n    stepContentParams: Object;\r\n    nextClicked: EventEmitter<any>;\r\n    prevCliked: EventEmitter<any>;\r\n    tourDone: EventEmitter<any>;\r\n    transformCssStyle: string;\r\n    isElementOrAncestorFixed: boolean;\r\n    targetViewContainer: ViewContainerRef;\r\n    stepInstance: JoyrideStepComponent;\r\n}","import { Injectable } from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { Subject } from 'rxjs';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { LoggerService } from './logger.service';\r\nimport { JoyrideError, JoyrideStepOutOfRange } from '../models/joyride-error.class';\r\n\r\nconst ROUTE_SEPARATOR = '@';\r\n\r\nclass Step {\r\n    id: string;\r\n    step: JoyrideStep;\r\n}\r\n\r\nexport enum StepActionType {\r\n    NEXT = 'NEXT',\r\n    PREV = 'PREV'\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepsContainerService {\r\n    protected steps: Step[];\r\n    protected tempSteps: JoyrideStep[] = [];\r\n    protected currentStepIndex: number = -2;\r\n    stepHasBeenModified: Subject<JoyrideStep> = new Subject<JoyrideStep>();\r\n\r\n    constructor(protected readonly stepOptions: JoyrideOptionsService, protected readonly logger: LoggerService) {}\r\n\r\n    protected getFirstStepIndex(): number {\r\n        let firstStep = this.stepOptions.getFirstStep();\r\n        let stepIds = this.stepOptions.getStepsOrder();\r\n\r\n        let index = stepIds.indexOf(firstStep);\r\n        if (index < 0) {\r\n            index = 0;\r\n            if (firstStep !== undefined) this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    init() {\r\n        this.logger.info('Initializing the steps array.');\r\n        this.steps = [];\r\n        this.currentStepIndex = this.getFirstStepIndex() - 1;\r\n        let stepIds = this.stepOptions.getStepsOrder();\r\n        stepIds.forEach(stepId => this.steps.push({ id: stepId, step: null }));\r\n    }\r\n\r\n    addStep(stepToAdd: JoyrideStep) {\r\n        let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\r\n        if (!stepExist) {\r\n            this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\r\n            this.tempSteps.push(stepToAdd);\r\n        } else {\r\n            let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\r\n            this.tempSteps[stepIndexToReplace] = stepToAdd;\r\n        }\r\n    }\r\n    get(action: StepActionType): JoyrideStep {\r\n        if (action === StepActionType.NEXT) this.currentStepIndex++;\r\n        else this.currentStepIndex--;\r\n\r\n        if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length)\r\n            throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\r\n\r\n        const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\r\n        const index = this.tempSteps.findIndex(step => step.name === stepName);\r\n        let stepFound = this.tempSteps[index];\r\n        this.steps[this.currentStepIndex].step = stepFound;\r\n\r\n        if (stepFound == null) {\r\n            this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\r\n        }\r\n\r\n        return stepFound;\r\n    }\r\n\r\n    getStepRoute(action: StepActionType) {\r\n        let stepID: string;\r\n        if (action === StepActionType.NEXT) {\r\n            stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\r\n        } else {\r\n            stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\r\n        }\r\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\r\n\r\n        return stepRoute;\r\n    }\r\n\r\n    updatePosition(stepName: string, position: string) {\r\n        let index = this.getStepIndex(stepName);\r\n        if (this.steps[index].step) {\r\n            this.steps[index].step.position = position;\r\n            this.stepHasBeenModified.next(this.steps[index].step);\r\n        } else {\r\n            this.logger.warn(\r\n                `Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`\r\n            );\r\n        }\r\n    }\r\n    getStepNumber(stepName: string): number {\r\n        return this.getStepIndex(stepName) + 1;\r\n    }\r\n\r\n    getStepsCount() {\r\n        let stepsOrder = this.stepOptions.getStepsOrder();\r\n        return stepsOrder.length;\r\n    }\r\n\r\n    protected getStepIndex(stepName: string): number {\r\n        const index = this.steps\r\n            .map(step => (step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id))\r\n            .findIndex(name => stepName === name);\r\n        if (index === -1) throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\r\n        return index;\r\n    }\r\n\r\n    protected getStepName(stepID: string): string {\r\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\r\n        return stepName;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideOptions, CustomTexts, ICustomTexts } from '../models/joyride-options.class';\r\nimport { of, Observable } from 'rxjs';\r\n\r\nexport const DEFAULT_THEME_COLOR = '#3b5560';\r\nexport const STEP_DEFAULT_POSITION = 'bottom';\r\nexport const DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\r\n\r\nexport class ObservableCustomTexts implements ICustomTexts {\r\n    prev: Observable<string>;\r\n    next: Observable<string>;\r\n    done: Observable<string>;\r\n    close: Observable<string>;\r\n}\r\nexport const DEFAULT_TEXTS: ObservableCustomTexts = {\r\n    prev: of('prev'),\r\n    next: of('next'),\r\n    done: of('done'),\r\n    close: of(null)\r\n};\r\n\r\nexport interface IJoyrideOptionsService {\r\n    setOptions(options: JoyrideOptions): void;\r\n    getBackdropColor(): string;\r\n    getThemeColor(): string;\r\n    getStepDefaultPosition();\r\n    getStepsOrder(): string[];\r\n    getFirstStep(): string;\r\n    getWaitingTime(): number;\r\n    areLogsEnabled(): boolean;\r\n    isCounterVisible(): boolean;\r\n    isPrevButtonVisible(): boolean;\r\n    getCustomTexts(): ObservableCustomTexts;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideOptionsService implements IJoyrideOptionsService {\r\n    protected themeColor: string = DEFAULT_THEME_COLOR;\r\n    protected stepDefaultPosition: string = STEP_DEFAULT_POSITION;\r\n    protected logsEnabled: boolean = true;\r\n    protected showCounter: boolean = true;\r\n    protected showPrevButton: boolean = true;\r\n    protected stepsOrder: string[] = [];\r\n    protected firstStep: string;\r\n    protected waitingTime: number;\r\n    protected customTexts: ObservableCustomTexts;\r\n\r\n    setOptions(options: JoyrideOptions) {\r\n        this.stepsOrder = options.steps;\r\n        this.stepDefaultPosition = options.stepDefaultPosition ? options.stepDefaultPosition : this.stepDefaultPosition;\r\n        this.logsEnabled = typeof options.logsEnabled !== 'undefined' ? options.logsEnabled : this.logsEnabled;\r\n        this.showCounter = typeof options.showCounter !== 'undefined' ? options.showCounter : this.showCounter;\r\n        this.showPrevButton = typeof options.showPrevButton !== 'undefined' ? options.showPrevButton : this.showPrevButton;\r\n        this.themeColor = options.themeColor ? options.themeColor : this.themeColor;\r\n        this.firstStep = options.startWith;\r\n        this.waitingTime = typeof options.waitingTime !== 'undefined' ? options.waitingTime : DEFAULT_TIMEOUT_BETWEEN_STEPS;\r\n        typeof options.customTexts !== 'undefined' ? this.setCustomText(options.customTexts) : this.setCustomText(DEFAULT_TEXTS);\r\n    }\r\n\r\n    getBackdropColor() {\r\n        return this.hexToRgb(this.themeColor);\r\n    }\r\n\r\n    getThemeColor() {\r\n        return this.themeColor;\r\n    }\r\n\r\n    getStepDefaultPosition() {\r\n        return this.stepDefaultPosition;\r\n    }\r\n\r\n    getStepsOrder() {\r\n        return this.stepsOrder;\r\n    }\r\n\r\n    getFirstStep() {\r\n        return this.firstStep;\r\n    }\r\n\r\n    getWaitingTime() {\r\n        return this.waitingTime;\r\n    }\r\n\r\n    areLogsEnabled() {\r\n        return this.logsEnabled;\r\n    }\r\n\r\n    isCounterVisible() {\r\n        return this.showCounter;\r\n    }\r\n\r\n    isPrevButtonVisible() {\r\n        return this.showPrevButton;\r\n    }\r\n\r\n    getCustomTexts(): ObservableCustomTexts {\r\n        return this.customTexts;\r\n    }\r\n\r\n    protected setCustomText(texts: CustomTexts) {\r\n        let prev, next, done, close: string | Observable<string>;\r\n        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\r\n        next = texts.next ? texts.next : DEFAULT_TEXTS.next;\r\n        done = texts.done ? texts.done : DEFAULT_TEXTS.done;\r\n        close = texts.close ? texts.close : DEFAULT_TEXTS.close;\r\n        this.customTexts = <ObservableCustomTexts>{\r\n            prev: this.toObservable(prev),\r\n            next: this.toObservable(next),\r\n            done: this.toObservable(done),\r\n            close: this.toObservable(close)\r\n        };\r\n    }\r\n\r\n    protected toObservable(value: string | Observable<string>) {\r\n        return value instanceof Observable ? value : of(value);\r\n    }\r\n\r\n    protected hexToRgb(hex: any): string {\r\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n        hex = hex.replace(shorthandRegex, (m: any, r: any, g: any, b: any) => {\r\n            return r + r + g + g + b + b;\r\n        });\r\n\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\n\r\nconst JOYRIDE = 'ngx-joyride:::';\r\n\r\n@Injectable()\r\nexport class LoggerService {\r\n\r\n    constructor(protected readonly optionService: JoyrideOptionsService) { }\r\n\r\n    debug(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.debug(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    info(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.info(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    warn(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.warn(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    error(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.error(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n}\r\n","export class JoyrideError extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideError.prototype);\r\n    }\r\n}\r\n\r\nexport class JoyrideStepDoesNotExist extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\r\n    }\r\n}\r\n\r\nexport class JoyrideStepOutOfRange extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\r\n    }\r\n}\r\n","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class DomRefService {\r\n    protected fakeDocument: Document = <Document>{ body: {}, documentElement: {} };\r\n    protected fakeWindow: Window = <Window>{ document: this.fakeDocument, navigator: {} };\r\n    constructor(@Inject(PLATFORM_ID) protected platformId: Object) {}\r\n    getNativeWindow(): Window {\r\n        if (isPlatformBrowser(this.platformId)) return window;\r\n        else return this.fakeWindow;\r\n    }\r\n\r\n    getNativeDocument() {\r\n        if (isPlatformBrowser(this.platformId)) return document;\r\n        else return this.fakeDocument;\r\n    }\r\n}\r\n","import { Injectable, TemplateRef } from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class TemplatesService {\r\n    protected _prevButton: TemplateRef<any>;\r\n    protected _nextButton: TemplateRef<any>;\r\n    protected _doneButton: TemplateRef<any>;\r\n    protected _counter: TemplateRef<any>;\r\n    \r\n    setPrevButton(template: TemplateRef<any>) {\r\n        this._prevButton = template;\r\n    }\r\n\r\n    getPrevButton() {\r\n        return this._prevButton;\r\n    }\r\n\r\n    setNextButton(template: TemplateRef<any>) {\r\n        this._nextButton = template;\r\n    }\r\n\r\n    getNextButton() {\r\n        return this._nextButton;\r\n    }\r\n\r\n    setDoneButton(template: TemplateRef<any>) {\r\n        this._doneButton = template;\r\n    }\r\n\r\n    getDoneButton() {\r\n        return this._doneButton;\r\n    }\r\n    setCounter(template: TemplateRef<any>) {\r\n        this._counter = template;\r\n    }\r\n\r\n    getCounter() {\r\n        return this._counter;\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    ElementRef,\r\n    AfterViewInit,\r\n    Input,\r\n    ViewContainerRef,\r\n    TemplateRef,\r\n    Output,\r\n    EventEmitter,\r\n    Inject,\r\n    PLATFORM_ID,\r\n    OnChanges,\r\n    SimpleChanges,\r\n    OnDestroy\r\n} from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { JoyrideStepsContainerService } from '../services/joyride-steps-container.service';\r\nimport { JoyrideError } from '../models/joyride-error.class';\r\nimport { Router } from '@angular/router';\r\nimport { DomRefService } from '../services/dom.service';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { TemplatesService } from '../services/templates.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\nexport const NO_POSITION = 'NO_POSITION';\r\n\r\n@Directive({\r\n    selector: 'joyrideStep, [joyrideStep]'\r\n})\r\nexport class JoyrideDirective implements AfterViewInit, OnChanges, OnDestroy {\r\n    @Input('joyrideStep')\r\n    name: string;\r\n\r\n    @Input()\r\n    nextStep?: string;\r\n\r\n    @Input()\r\n    title?: string | Observable<string>;\r\n\r\n    @Input()\r\n    text?: string | Observable<string>;\r\n\r\n    @Input()\r\n    stepPosition?: string = NO_POSITION;\r\n\r\n    @Input()\r\n    stepContent?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    stepContentParams?: Object;\r\n\r\n    @Input()\r\n    prevTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    nextTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    doneTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    counterTemplate?: TemplateRef<any>;\r\n\r\n    @Output()\r\n    prev?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    next?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    done?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    protected windowRef: Window;\r\n    protected step: JoyrideStep;\r\n    protected subscriptions: Subscription[] = [];\r\n\r\n    constructor(\r\n        protected readonly joyrideStepsContainer: JoyrideStepsContainerService,\r\n        protected viewContainerRef: ViewContainerRef,\r\n        protected readonly domService: DomRefService,\r\n        protected readonly router: Router,\r\n        protected readonly templateService: TemplatesService,\r\n        @Inject(PLATFORM_ID) protected platformId: Object\r\n    ) {\r\n        this.windowRef = this.domService.getNativeWindow();\r\n        this.step = new JoyrideStep();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!isPlatformBrowser(this.platformId)) return;\r\n        if (this.prevTemplate) this.templateService.setPrevButton(this.prevTemplate);\r\n        if (this.nextTemplate) this.templateService.setNextButton(this.nextTemplate);\r\n        if (this.doneTemplate) this.templateService.setDoneButton(this.doneTemplate);\r\n        if (this.counterTemplate) this.templateService.setCounter(this.counterTemplate);\r\n        this.step.position = this.stepPosition;\r\n        this.step.targetViewContainer = this.viewContainerRef;\r\n        this.setAsyncFields(this.step);\r\n        this.step.stepContent = this.stepContent;\r\n        this.step.stepContentParams = this.stepContentParams;\r\n        this.step.nextClicked = this.next;\r\n        this.step.prevCliked = this.prev;\r\n        this.step.tourDone = this.done;\r\n        if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\r\n        this.step.name = this.name;\r\n        this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\r\n        this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\r\n        this.step.isElementOrAncestorFixed =\r\n            this.isElementFixed(this.viewContainerRef.element) ||\r\n            this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\r\n\r\n        this.joyrideStepsContainer.addStep(this.step);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes['title'] || changes['text']) {\r\n            this.setAsyncFields(this.step);\r\n        }\r\n    }\r\n\r\n    protected isElementFixed(element: ElementRef) {\r\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\r\n    }\r\n\r\n    protected setAsyncFields(step: JoyrideStep) {\r\n        if (this.title instanceof Observable) {\r\n            this.subscriptions.push(\r\n                this.title.subscribe(title => {\r\n                    step.title.next(title);\r\n                })\r\n            );\r\n        } else {\r\n            step.title.next(this.title);\r\n        }\r\n        if (this.text instanceof Observable) {\r\n            this.subscriptions.push(\r\n                this.text.subscribe(text => {\r\n                    step.text.next(text);\r\n                })\r\n            );\r\n        } else {\r\n            step.text.next(this.text);\r\n        }\r\n    }\r\n\r\n    protected isAncestorsFixed(nativeElement: any): boolean {\r\n        if (!nativeElement || !nativeElement.parentElement) return false;\r\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\r\n        if (nativeElement.nodeName === 'BODY') {\r\n            return isElementFixed;\r\n        }\r\n        if (isElementFixed) return true;\r\n        else return this.isAncestorsFixed(nativeElement.parentElement);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(sub => {\r\n            sub.unsubscribe();\r\n        });\r\n    }\r\n}\r\n","import { Injectable, ElementRef } from '@angular/core';\r\nimport { DomRefService } from './dom.service';\r\n\r\nexport interface IDocumentService {\r\n    getElementFixedTop(elementRef: ElementRef): number;\r\n\r\n    getElementFixedLeft(elementRef: ElementRef);\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef);\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef);\r\n\r\n    setDocumentHeight();\r\n\r\n    getDocumentHeight(): number;\r\n    isParentScrollable(elementRef: ElementRef): boolean;\r\n    isElementBeyondOthers(elementRef: ElementRef, isElementFixed: boolean, keywordToDiscard: string): number;\r\n    scrollToTheTop(elementRef: ElementRef): void;\r\n    scrollToTheBottom(elementRef: ElementRef): void;\r\n}\r\n\r\n@Injectable()\r\nexport class DocumentService implements IDocumentService {\r\n    protected documentHeight: number;\r\n\r\n    constructor(protected readonly DOMService: DomRefService) {\r\n        this.setDocumentHeight();\r\n        if (!document.elementsFromPoint) {\r\n            // IE 11 - Edge browsers\r\n            document.elementsFromPoint = this.elementsFromPoint.bind(this);\r\n        }\r\n    }\r\n\r\n    getElementFixedTop(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().top;\r\n    }\r\n\r\n    getElementFixedLeft(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().left;\r\n    }\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().top + scrollOffsets.y;\r\n    }\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().left + scrollOffsets.x;\r\n    }\r\n\r\n    setDocumentHeight() {\r\n        this.documentHeight = this.calculateDocumentHeight();\r\n    }\r\n\r\n    getDocumentHeight() {\r\n        return this.documentHeight;\r\n    }\r\n\r\n    isParentScrollable(elementRef: ElementRef): boolean {\r\n        return this.getFirstScrollableParent(elementRef.nativeElement) !== this.DOMService.getNativeDocument().body;\r\n    }\r\n\r\n    isElementBeyondOthers(elementRef: ElementRef, isElementFixed: boolean, keywordToDiscard: string) {\r\n        const x1 = isElementFixed ? this.getElementFixedLeft(elementRef) : this.getElementAbsoluteLeft(elementRef);\r\n        const y1 = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\r\n        const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\r\n        const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\r\n\r\n        const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\r\n        const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\r\n\r\n        if (elements1.length === 0 && elements2.length === 0) return 1;\r\n        if (\r\n            this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !== elementRef.nativeElement ||\r\n            this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !== elementRef.nativeElement\r\n        ) {\r\n            return 2;\r\n        }\r\n        return 3;\r\n    }\r\n\r\n    scrollIntoView(elementRef: ElementRef, isElementFixed: boolean): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\r\n        const top = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\r\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, top - 150);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = top - 150;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, top - 150);\r\n        }\r\n    }\r\n\r\n    scrollToTheTop(elementRef: ElementRef): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\r\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, 0);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = 0;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        }\r\n    }\r\n\r\n    scrollToTheBottom(elementRef: ElementRef): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\r\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = firstScrollableParent.scrollHeight - firstScrollableParent.clientHeight;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\r\n        }\r\n    }\r\n\r\n    protected getFirstScrollableParent(node: any) {\r\n        const regex = /(auto|scroll|overlay)/;\r\n\r\n        const style = (node: any, prop: any) =>\r\n            this.DOMService.getNativeWindow()\r\n                .getComputedStyle(node, null)\r\n                .getPropertyValue(prop);\r\n\r\n        const scroll = (node: any) => regex.test(style(node, 'overflow') + style(node, 'overflow-y') + style(node, 'overflow-x'));\r\n\r\n        const scrollparent = (node: any): any => {\r\n            return !node || node === this.DOMService.getNativeDocument().body\r\n                ? this.DOMService.getNativeDocument().body\r\n                : scroll(node)\r\n                ? node\r\n                : scrollparent(node.parentNode);\r\n        };\r\n\r\n        return scrollparent(node);\r\n    }\r\n\r\n    protected calculateDocumentHeight() {\r\n        const documentRef = this.DOMService.getNativeDocument();\r\n        return Math.max(\r\n            documentRef.body.scrollHeight,\r\n            documentRef.documentElement.scrollHeight,\r\n            documentRef.body.offsetHeight,\r\n            documentRef.documentElement.offsetHeight,\r\n            documentRef.body.clientHeight,\r\n            documentRef.documentElement.clientHeight\r\n        );\r\n    }\r\n\r\n    protected getScrollOffsets() {\r\n        const winReference = this.DOMService.getNativeWindow();\r\n        const docReference = this.DOMService.getNativeDocument();\r\n\r\n        // This works for all browsers except IE versions 8 and before\r\n        if (winReference.pageXOffset != null) return { x: winReference.pageXOffset, y: winReference.pageYOffset };\r\n\r\n        // For IE (or any browser) in Standards mode\r\n        if (docReference.compatMode == 'CSS1Compat')\r\n            return {\r\n                x: docReference.documentElement.scrollLeft,\r\n                y: docReference.documentElement.scrollTop\r\n            };\r\n\r\n        // For browsers in Quirks mode\r\n        return { x: docReference.body.scrollLeft, y: docReference.body.scrollTop };\r\n    }\r\n\r\n    protected elementsFromPoint(x, y) {\r\n        var parents = [];\r\n        var parent = void 0;\r\n        do {\r\n            const elem = this.DOMService.getNativeDocument().elementFromPoint(x, y);\r\n            if (elem && parent !== elem) {\r\n                parent = elem;\r\n                parents.push(parent);\r\n                parent.style.pointerEvents = 'none';\r\n            } else {\r\n                parent = false;\r\n            }\r\n        } while (parent);\r\n        parents.forEach(function(parent) {\r\n            return (parent.style.pointerEvents = 'all');\r\n        });\r\n        return parents;\r\n    }\r\n\r\n    protected getFirstElementWithoutKeyword(elements: Element[], keyword: string): Element {\r\n        while (elements[0] && elements[0].classList.toString().includes(keyword)) {\r\n            elements.shift();\r\n        }\r\n        return elements[0];\r\n    }\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2, ViewContainerRef } from '@angular/core';\r\nimport { DocumentService } from './document.service';\r\nimport { Scroll } from './event-listener.service';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\n\r\n@Injectable()\r\nexport class JoyrideBackdropService {\r\n    protected renderer: Renderer2;\r\n    protected currentBackdropContainer: any;\r\n    protected lastBackdropContainer: any;\r\n    protected backdropContent: any;\r\n    protected backdropTop: any;\r\n    protected backdropBottom: any;\r\n    protected backdropMiddleContainer: any;\r\n    protected backdropMiddleContent: any;\r\n    protected leftBackdrop: any;\r\n    protected targetBackdrop: any;\r\n    protected rightBackdrop: any;\r\n    protected elementRef: ViewContainerRef;\r\n    protected targetAbsoluteTop: number;\r\n    protected targetAbsoluteLeft: number;\r\n    protected lastXScroll: number = 0;\r\n    protected lastYScroll: number = 0;\r\n\r\n    constructor(\r\n        protected readonly documentService: DocumentService,\r\n        protected readonly optionsService: JoyrideOptionsService,\r\n        protected readonly rendererFactory: RendererFactory2\r\n    ) {\r\n        this.setRenderer();\r\n    }\r\n\r\n    protected setRenderer() {\r\n        this.renderer = this.rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    draw(step: JoyrideStep) {\r\n        this.elementRef = step.targetViewContainer;\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n\r\n        this.currentBackdropContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\r\n        this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\r\n\r\n        this.backdropContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropContent, 'backdrop-content');\r\n        this.renderer.setStyle(this.backdropContent, 'position', 'relative');\r\n        this.renderer.setStyle(this.backdropContent, 'height', '100%');\r\n        this.renderer.setStyle(this.backdropContent, 'display', 'flex');\r\n        this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\r\n        this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\r\n\r\n        this.backdropTop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.backdropTop, 'backdrop-top');\r\n        this.renderer.setStyle(this.backdropTop, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\r\n        this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\r\n\r\n        this.backdropMiddleContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\r\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\r\n\r\n        this.backdropMiddleContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\r\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\r\n\r\n        this.leftBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\r\n        this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\r\n        this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\r\n\r\n        this.targetBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\r\n        this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\r\n\r\n        this.rightBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\r\n        this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\r\n        this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\r\n\r\n        this.backdropBottom = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\r\n        this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\r\n        this.renderer.setStyle(this.backdropBottom, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropBottom, 'height', '100%');\r\n        this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\r\n\r\n        this.removeLastBackdrop();\r\n        this.drawCurrentBackdrop();\r\n        this.lastBackdropContainer = this.currentBackdropContainer;\r\n    }\r\n\r\n    remove() {\r\n        this.removeLastBackdrop();\r\n    }\r\n\r\n    redrawTarget(step: JoyrideStep) {\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.handleVerticalScroll(step);\r\n        this.handleHorizontalScroll(step);\r\n    }\r\n\r\n    protected getTargetTotalTop(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n        return step.isElementOrAncestorFixed\r\n            ? this.documentService.getElementFixedTop(targetVC.element)\r\n            : this.documentService.getElementAbsoluteTop(targetVC.element);\r\n    }\r\n\r\n    protected getTargetTotalLeft(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n\r\n        return step.isElementOrAncestorFixed\r\n            ? this.documentService.getElementFixedLeft(targetVC.element)\r\n            : this.documentService.getElementAbsoluteLeft(targetVC.element);\r\n    }\r\n    redraw(step: JoyrideStep, scroll: Scroll) {\r\n        if (this.lastYScroll !== scroll.scrollY) {\r\n            this.lastYScroll = scroll.scrollY;\r\n            if (this.elementRef) {\r\n                this.handleVerticalScroll(step);\r\n            }\r\n        }\r\n        if (this.lastXScroll !== scroll.scrollX) {\r\n            this.lastXScroll = scroll.scrollX;\r\n            if (this.elementRef) {\r\n                this.handleHorizontalScroll(step);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected handleHorizontalScroll(step: JoyrideStep) {\r\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\r\n\r\n        if (newBackdropLeftWidth >= 0) {\r\n            this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        } else {\r\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\r\n        }\r\n    }\r\n\r\n    protected handleTargetPartialWidth(newBackdropLeftWidth: number) {\r\n        this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\r\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\r\n        if (visibleTargetWidth >= 0) {\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\r\n        } else {\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\r\n        }\r\n    }\r\n\r\n    protected handleVerticalScroll(step: JoyrideStep) {\r\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\r\n\r\n        if (newBackdropTopHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        } else {\r\n            this.handleTargetPartialHeight(newBackdropTopHeight);\r\n        }\r\n    }\r\n\r\n    protected handleTargetPartialHeight(newBackdropTopHeight: number) {\r\n        this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\r\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\r\n        if (visibleTargetHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\r\n        } else {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\r\n        }\r\n    }\r\n\r\n    protected removeLastBackdrop() {\r\n        if (this.lastBackdropContainer) {\r\n            this.renderer.removeChild(document.body, this.lastBackdropContainer);\r\n            this.lastBackdropContainer = undefined;\r\n        }\r\n    }\r\n\r\n    protected drawCurrentBackdrop() {\r\n        this.renderer.appendChild(document.body, this.currentBackdropContainer);\r\n    }\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { DomRefService } from './dom.service';\r\n\r\nexport class Scroll {\r\n    scrollX: number;\r\n    scrollY: number;\r\n}\r\n\r\n@Injectable()\r\nexport class EventListenerService {\r\n    protected renderer: Renderer2;\r\n    protected scrollUnlisten: any;\r\n    protected resizeUnlisten: any;\r\n\r\n    scrollEvent: Subject<Scroll> = new Subject<Scroll>();\r\n    resizeEvent: Subject<number> = new Subject<number>();\r\n\r\n    constructor(protected readonly rendererFactory: RendererFactory2, protected readonly DOMService: DomRefService) {\r\n        this.renderer = rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    startListeningScrollEvents() {\r\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\r\n            this.scrollEvent.next({\r\n                scrollX: this.DOMService.getNativeWindow().pageXOffset,\r\n                scrollY: this.DOMService.getNativeWindow().pageYOffset\r\n            });\r\n        });\r\n    }\r\n\r\n    startListeningResizeEvents() {\r\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\r\n            this.resizeEvent.next(evt);\r\n        });\r\n    }\r\n\r\n    stopListeningScrollEvents() {\r\n        this.scrollUnlisten();\r\n    }\r\n\r\n    stopListeningResizeEvents() {\r\n        this.resizeUnlisten();\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    Input,\r\n    AfterViewInit,\r\n    ViewEncapsulation,\r\n    OnInit,\r\n    OnDestroy,\r\n    ElementRef,\r\n    ViewChild,\r\n    Renderer2,\r\n    Injector,\r\n    TemplateRef\r\n} from '@angular/core';\r\nimport { JoyrideStep } from '../../models/joyride-step.class';\r\nimport { JoyrideStepService, ARROW_SIZE, DISTANCE_FROM_TARGET, IJoyrideStepService } from '../../services/joyride-step.service';\r\nimport { JoyrideStepsContainerService } from '../../services/joyride-steps-container.service';\r\nimport { EventListenerService } from '../../services/event-listener.service';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport { DocumentService } from '../../services/document.service';\r\nimport { JoyrideOptionsService } from '../../services/joyride-options.service';\r\nimport { LoggerService } from '../../services/logger.service';\r\nimport { TemplatesService } from '../../services/templates.service';\r\n\r\nconst STEP_MIN_WIDTH = 200;\r\nconst STEP_MAX_WIDTH = 400;\r\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\r\nconst STEP_HEIGHT = 200;\r\nconst ASPECT_RATIO = 1.212;\r\nexport const DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\r\nexport const DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\r\n\r\n@Component({\r\n    selector: 'joyride-step',\r\n    templateUrl: './joyride-step.component.html',\r\n    styleUrls: ['./joyride-step.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideStepComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    stepWidth: number = STEP_MIN_WIDTH;\r\n    stepHeight: number = STEP_HEIGHT;\r\n    leftPosition: number;\r\n    topPosition: number;\r\n    showArrow: boolean = true;\r\n    arrowPosition: string;\r\n    arrowLeftPosition: number;\r\n    arrowTopPosition: number;\r\n    title: Observable<string>;\r\n    text: Observable<string>;\r\n    counter: string;\r\n    isCounterVisible: boolean;\r\n    isPrevButtonVisible: boolean;\r\n    themeColor: string;\r\n    customContent: TemplateRef<any>;\r\n    customPrevButton: TemplateRef<any>;\r\n    customNextButton: TemplateRef<any>;\r\n    customDoneButton: TemplateRef<any>;\r\n    customCounter: TemplateRef<any>;\r\n    counterData: any;\r\n    ctx: Object;\r\n\r\n    protected arrowSize: number = ARROW_SIZE;\r\n    protected stepAbsoluteLeft: number;\r\n    protected stepAbsoluteTop: number;\r\n    protected targetWidth: number;\r\n    targetHeight: number;\r\n    protected targetAbsoluteLeft: number;\r\n    protected targetAbsoluteTop: number;\r\n\r\n    protected subscriptions: Subscription[] = [];\r\n    joyrideStepService: IJoyrideStepService;\r\n\r\n    protected positionAlreadyFixed: boolean;\r\n    protected documentHeight: number;\r\n\r\n    prevText: Observable<string>;\r\n    nextText: Observable<string>;\r\n    doneText: Observable<string>;\r\n\r\n    @Input() step?: JoyrideStep;\r\n    @ViewChild('stepHolder') stepHolder: ElementRef;\r\n    @ViewChild('stepContainer') stepContainer: ElementRef;\r\n\r\n    constructor(\r\n        protected injector: Injector,\r\n        protected readonly stepsContainerService: JoyrideStepsContainerService,\r\n        protected readonly eventListenerService: EventListenerService,\r\n        protected readonly documentService: DocumentService,\r\n        protected readonly renderer: Renderer2,\r\n        protected readonly logger: LoggerService,\r\n        protected readonly optionsService: JoyrideOptionsService,\r\n        protected readonly templateService: TemplatesService\r\n    ) {}\r\n\r\n    ngOnInit(): void {\r\n        // Need to Inject here otherwise you will obtain a circular dependency\r\n        this.joyrideStepService = this.injector.get(JoyrideStepService);\r\n\r\n        this.documentHeight = this.documentService.getDocumentHeight();\r\n        this.subscriptions.push(this.subscribeToResizeEvents());\r\n        this.title = this.step.title.asObservable();\r\n        this.text = this.step.text.asObservable();\r\n\r\n        this.setCustomTemplates();\r\n        this.setCustomTexts();\r\n\r\n        this.counter = this.getCounter();\r\n        this.isCounterVisible = this.optionsService.isCounterVisible();\r\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\r\n        this.themeColor = this.optionsService.getThemeColor();\r\n\r\n        if (this.text) this.text.subscribe(val => this.checkRedraw(val));\r\n        if (this.title) this.title.subscribe(val => this.checkRedraw(val));\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isCustomized()) {\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\r\n            this.updateStepDimensions();\r\n        } else {\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\r\n            let dimensions = this.getDimensionsByAspectRatio(\r\n                this.stepContainer.nativeElement.clientWidth,\r\n                this.stepContainer.nativeElement.clientHeight,\r\n                ASPECT_RATIO\r\n            );\r\n            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\r\n            this.stepWidth = dimensions.width;\r\n            this.stepHeight = dimensions.height;\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\r\n        }\r\n        this.drawStep();\r\n    }\r\n\r\n    protected checkRedraw(val) {\r\n        if (val != null) {\r\n            // Need to wait that the change is rendered before redrawing\r\n            setTimeout(() => {\r\n                this.redrawStep();\r\n            }, 2);\r\n        }\r\n    }\r\n\r\n    protected isCustomized() {\r\n        return (\r\n            this.step.stepContent ||\r\n            this.templateService.getCounter() ||\r\n            this.templateService.getPrevButton() ||\r\n            this.templateService.getNextButton() ||\r\n            this.templateService.getDoneButton()\r\n        );\r\n    }\r\n\r\n    protected setCustomTexts() {\r\n        const customeTexts = this.optionsService.getCustomTexts();\r\n        this.prevText = customeTexts.prev;\r\n        this.nextText = customeTexts.next;\r\n        this.doneText = customeTexts.done;\r\n    }\r\n\r\n    protected drawStep() {\r\n        let position = this.step.isElementOrAncestorFixed ? 'fixed' : 'absolute';\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\r\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\r\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\r\n        this.targetAbsoluteLeft =\r\n            position === 'fixed'\r\n                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)\r\n                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\r\n        this.targetAbsoluteTop =\r\n            position === 'fixed'\r\n                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)\r\n                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\r\n        this.setStepStyle();\r\n    }\r\n\r\n    protected getCounter(): string {\r\n        let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);\r\n        let numberOfSteps = this.stepsContainerService.getStepsCount();\r\n        this.counterData = { step: stepPosition, total: numberOfSteps };\r\n        return stepPosition + '/' + numberOfSteps;\r\n    }\r\n\r\n    protected setCustomTemplates() {\r\n        this.customContent = this.step.stepContent;\r\n        this.ctx = this.step.stepContentParams;\r\n        this.customPrevButton = this.templateService.getPrevButton();\r\n        this.customNextButton = this.templateService.getNextButton();\r\n        this.customDoneButton = this.templateService.getDoneButton();\r\n        this.customCounter = this.templateService.getCounter();\r\n    }\r\n\r\n    prev() {\r\n        this.joyrideStepService.prev();\r\n    }\r\n\r\n    next() {\r\n        this.joyrideStepService.next();\r\n    }\r\n\r\n    close() {\r\n        this.joyrideStepService.close();\r\n    }\r\n\r\n    isFirstStep() {\r\n        return this.stepsContainerService.getStepNumber(this.step.name) === 1;\r\n    }\r\n\r\n    isLastStep() {\r\n        return this.stepsContainerService.getStepNumber(this.step.name) === this.stepsContainerService.getStepsCount();\r\n    }\r\n\r\n    protected setStepStyle() {\r\n        switch (this.step.position) {\r\n            case 'top': {\r\n                this.setStyleTop();\r\n                break;\r\n            }\r\n            case 'bottom': {\r\n                this.setStyleBottom();\r\n                break;\r\n            }\r\n            case 'right': {\r\n                this.setStyleRight();\r\n                break;\r\n            }\r\n            case 'left': {\r\n                this.setStyleLeft();\r\n                break;\r\n            }\r\n            case 'center': {\r\n                this.setStyleCenter();\r\n                break;\r\n            }\r\n            default: {\r\n                this.setStyleBottom();\r\n            }\r\n        }\r\n    }\r\n\r\n    protected setStyleTop() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'top');\r\n        this.topPosition = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.arrowTopPosition = this.stepHeight;\r\n\r\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'bottom';\r\n        this.autofixTopPosition();\r\n    }\r\n\r\n    protected setStyleRight() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'right');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = -this.arrowSize;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'left';\r\n        this.autofixRightPosition();\r\n    }\r\n\r\n    protected setStyleBottom() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'bottom');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.arrowTopPosition = -this.arrowSize;\r\n\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'top';\r\n        this.autofixBottomPosition();\r\n    }\r\n\r\n    protected setStyleLeft() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'left');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = this.stepWidth;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'right';\r\n        this.autofixLeftPosition();\r\n    }\r\n\r\n    protected setStyleCenter() {\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\r\n\r\n        this.updateStepDimensions();\r\n\r\n        this.renderer.setStyle(\r\n            this.stepHolder.nativeElement,\r\n            'transform',\r\n            `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`\r\n        );\r\n        this.showArrow = false;\r\n    }\r\n\r\n    protected adjustLeftPosition() {\r\n        if (this.leftPosition < 0) {\r\n            this.arrowLeftPosition = this.arrowLeftPosition + this.leftPosition - DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n        }\r\n    }\r\n\r\n    protected adjustRightPosition() {\r\n        let currentWindowWidth = document.body.clientWidth;\r\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\r\n            let newLeftPos =\r\n                this.leftPosition - (this.stepAbsoluteLeft + this.stepWidth + DEFAULT_DISTANCE_FROM_MARGIN_RIGHT - currentWindowWidth);\r\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\r\n\r\n            this.leftPosition = newLeftPos;\r\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\r\n        }\r\n    }\r\n\r\n    protected adjustTopPosition() {\r\n        if (this.stepAbsoluteTop < 0) {\r\n            this.arrowTopPosition = this.arrowTopPosition + this.topPosition - DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n        }\r\n    }\r\n\r\n    protected adjustBottomPosition() {\r\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\r\n            let newTopPos =\r\n                this.topPosition - (this.stepAbsoluteTop + this.stepHeight + DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM - this.documentHeight);\r\n            let deltaTopPosition = newTopPos - this.topPosition;\r\n\r\n            this.topPosition = newTopPos;\r\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\r\n        }\r\n    }\r\n\r\n    protected autofixTopPosition() {\r\n        if (this.positionAlreadyFixed) {\r\n            this.logger.warn('No step positions found for this step. The step will be centered.');\r\n        } else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize < 0) {\r\n            this.positionAlreadyFixed = true;\r\n            this.setStyleRight();\r\n        }\r\n    }\r\n\r\n    protected autofixRightPosition() {\r\n        if (this.targetAbsoluteLeft + this.targetWidth + this.stepWidth + this.arrowSize > document.body.clientWidth) {\r\n            this.setStyleBottom();\r\n        }\r\n    }\r\n\r\n    protected autofixBottomPosition() {\r\n        if (this.targetAbsoluteTop + this.stepHeight + this.arrowSize + this.targetHeight > this.documentHeight) {\r\n            this.setStyleLeft();\r\n        }\r\n    }\r\n\r\n    protected autofixLeftPosition() {\r\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\r\n            this.setStyleTop();\r\n        }\r\n    }\r\n\r\n    protected subscribeToResizeEvents(): Subscription {\r\n        return this.eventListenerService.resizeEvent.subscribe(() => {\r\n            this.redrawStep();\r\n        });\r\n    }\r\n\r\n    protected redrawStep() {\r\n        this.updateStepDimensions();\r\n        this.drawStep();\r\n    }\r\n\r\n    protected getDimensionsByAspectRatio(width: number, height: number, aspectRatio: number) {\r\n        let calcHeight = (width + height) / (1 + aspectRatio);\r\n        let calcWidth = calcHeight * aspectRatio;\r\n        return {\r\n            width: calcWidth,\r\n            height: calcHeight\r\n        };\r\n    }\r\n    protected adjustDimensions(width: number, height: number) {\r\n        let area = width * height;\r\n        let newWidth = width;\r\n        let newHeight = height;\r\n        if (width > STEP_MAX_WIDTH) {\r\n            newWidth = STEP_MAX_WIDTH;\r\n            newHeight = area / newWidth;\r\n        } else if (width < STEP_MIN_WIDTH) {\r\n            newWidth = STEP_MIN_WIDTH;\r\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\r\n        }\r\n        return {\r\n            width: newWidth,\r\n            height: newHeight\r\n        };\r\n    }\r\n\r\n    protected updateStepDimensions() {\r\n        this.stepWidth = this.stepContainer.nativeElement.clientWidth;\r\n        this.stepHeight = this.stepContainer.nativeElement.clientHeight;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscriptions.forEach(subscription => {\r\n            subscription.unsubscribe();\r\n        });\r\n    }\r\n}\r\n","import { Injectable, ComponentRef, ComponentFactoryResolver, ApplicationRef, Injector, EmbeddedViewRef } from '@angular/core';\r\nimport { JoyrideStepComponent } from \"../components/step/joyride-step.component\";\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\n\r\n@Injectable()\r\nexport class StepDrawerService {\r\n\r\n    protected refMap: { [key: string]: ComponentRef<JoyrideStepComponent>; } = {};\r\n\r\n    constructor(\r\n        protected readonly componentFactoryResolver: ComponentFactoryResolver,\r\n        protected appRef: ApplicationRef,\r\n        protected injector: Injector\r\n    ) { }\r\n\r\n    draw(step: JoyrideStep) {\r\n\r\n        // 1. Create a component reference from the component \r\n        const ref: ComponentRef<JoyrideStepComponent> = this.componentFactoryResolver\r\n            .resolveComponentFactory(JoyrideStepComponent)\r\n            .create(this.injector);\r\n\r\n        // 2. Attach component to the appRef so that it's inside the ng component tree\r\n        this.appRef.attachView(ref.hostView);\r\n\r\n        // 3. Get DOM element from component\r\n        const domElem = (ref.hostView as EmbeddedViewRef<any>)\r\n            .rootNodes[0] as HTMLElement;\r\n\r\n        // 4. Append DOM element to the body\r\n        document.body.appendChild(domElem);\r\n\r\n        const instance: JoyrideStepComponent = ref.instance;\r\n        instance.step = step;\r\n        ref.changeDetectorRef.detectChanges();\r\n        step.stepInstance = instance;\r\n\r\n        this.refMap[step.name] = ref;\r\n\r\n    }\r\n\r\n    remove(step: JoyrideStep) {\r\n        this.appRef.detachView(this.refMap[step.name].hostView);\r\n        this.refMap[step.name].destroy();\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { JoyrideBackdropService } from './joyride-backdrop.service';\r\nimport { EventListenerService } from './event-listener.service';\r\nimport { JoyrideStepsContainerService, StepActionType } from './joyride-steps-container.service';\r\nimport { DocumentService } from './document.service';\r\nimport { StepDrawerService } from './step-drawer.service';\r\nimport { DomRefService } from './dom.service';\r\nimport { NO_POSITION } from '../directives/joyride.directive';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { Router } from '@angular/router';\r\nimport { ReplaySubject, Observable } from 'rxjs';\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { JoyrideStepDoesNotExist, JoyrideStepOutOfRange } from '../models/joyride-error.class';\r\nimport { LoggerService } from './logger.service';\r\n\r\nconst SCROLLBAR_SIZE = 20;\r\n\r\nexport const DISTANCE_FROM_TARGET = 15;\r\nexport const ARROW_SIZE = 10;\r\n\r\nexport interface IJoyrideStepService {\r\n    startTour(): Observable<JoyrideStepInfo>;\r\n    close(): any;\r\n    prev(): any;\r\n    next(): any;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepService implements IJoyrideStepService {\r\n    protected currentStep: JoyrideStep;\r\n    protected winTopPosition: number = 0;\r\n    protected winBottomPosition: number = 0;\r\n    protected stepsObserver: ReplaySubject<JoyrideStepInfo> = new ReplaySubject<JoyrideStepInfo>();\r\n\r\n    constructor(\r\n        protected readonly backDropService: JoyrideBackdropService,\r\n        protected readonly eventListener: EventListenerService,\r\n        protected readonly stepsContainerService: JoyrideStepsContainerService,\r\n        protected readonly documentService: DocumentService,\r\n        protected readonly DOMService: DomRefService,\r\n        protected readonly stepDrawerService: StepDrawerService,\r\n        protected readonly optionsService: JoyrideOptionsService,\r\n        protected readonly router: Router,\r\n        protected readonly logger: LoggerService\r\n    ) {\r\n        this.initViewportPositions();\r\n        this.subscribeToScrollEvents();\r\n        this.subscribeToResizeEvents();\r\n    }\r\n\r\n    protected initViewportPositions() {\r\n        this.winTopPosition = 0;\r\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n    }\r\n\r\n    protected subscribeToScrollEvents() {\r\n        this.eventListener.startListeningScrollEvents();\r\n        this.eventListener.scrollEvent.subscribe(scroll => {\r\n            this.winTopPosition = scroll.scrollY;\r\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n            if (this.currentStep) this.backDropService.redraw(this.currentStep, scroll);\r\n        });\r\n    }\r\n\r\n    protected subscribeToResizeEvents() {\r\n        this.eventListener.resizeEvent.subscribe(() => {\r\n            if (this.currentStep) this.backDropService.redrawTarget(this.currentStep);\r\n        });\r\n    }\r\n\r\n    protected drawStep(step: JoyrideStep) {\r\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\r\n        this.stepDrawerService.draw(step);\r\n    }\r\n\r\n    startTour(): Observable<JoyrideStepInfo> {\r\n        this.stepsObserver = new ReplaySubject<JoyrideStepInfo>();\r\n        this.stepsContainerService.init();\r\n        this.documentService.setDocumentHeight();\r\n\r\n        this.tryShowStep(StepActionType.NEXT);\r\n        this.eventListener.startListeningResizeEvents();\r\n        this.subscribeToStepsUpdates();\r\n        return this.stepsObserver.asObservable();\r\n    }\r\n\r\n    close() {\r\n        this.removeCurrentStep();\r\n        this.notifyTourIsFinished();\r\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        this.eventListener.stopListeningResizeEvents();\r\n        this.backDropService.remove();\r\n    }\r\n\r\n    prev() {\r\n        this.removeCurrentStep();\r\n        this.currentStep.prevCliked.emit();\r\n        this.tryShowStep(StepActionType.PREV);\r\n    }\r\n\r\n    next() {\r\n        this.removeCurrentStep();\r\n        this.currentStep.nextClicked.emit();\r\n        this.tryShowStep(StepActionType.NEXT);\r\n    }\r\n\r\n    protected navigateToStepPage(action: StepActionType) {\r\n        let stepRoute = this.stepsContainerService.getStepRoute(action);\r\n        if (stepRoute) {\r\n            this.router.navigate([stepRoute]);\r\n        }\r\n    }\r\n\r\n    protected subscribeToStepsUpdates() {\r\n        this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\r\n            if (this.currentStep && this.currentStep.name === updatedStep.name) {\r\n                this.currentStep = updatedStep;\r\n            }\r\n        });\r\n    }\r\n\r\n    protected tryShowStep(actionType: StepActionType) {\r\n        this.navigateToStepPage(actionType);\r\n        const timeout = this.optionsService.getWaitingTime();\r\n        if (timeout > 100) this.backDropService.remove();\r\n        setTimeout(() => {\r\n            try {\r\n                this.showStep(actionType);\r\n            } catch (error) {\r\n                if (error instanceof JoyrideStepDoesNotExist) {\r\n                    this.tryShowStep(actionType);\r\n                } else if (error instanceof JoyrideStepOutOfRange) {\r\n                    this.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\r\n                    this.close();\r\n                } else {\r\n                    throw new Error(error);\r\n                }\r\n            }\r\n        }, timeout);\r\n    }\r\n\r\n    protected showStep(actionType: StepActionType) {\r\n        this.currentStep = this.stepsContainerService.get(actionType);\r\n\r\n        if (this.currentStep == null) throw new JoyrideStepDoesNotExist('');\r\n        // Scroll the element to get it visible if it's in a scrollable element\r\n        this.scrollIfElementBeyondOtherElements();\r\n        this.backDropService.draw(this.currentStep);\r\n        this.drawStep(this.currentStep);\r\n        this.scrollIfStepAndTargetAreNotVisible();\r\n        this.notifyStepClicked(actionType);\r\n    }\r\n\r\n    protected notifyStepClicked(actionType: StepActionType) {\r\n        let stepInfo: JoyrideStepInfo = {\r\n            number: this.stepsContainerService.getStepNumber(this.currentStep.name),\r\n            name: this.currentStep.name,\r\n            route: this.currentStep.route,\r\n            actionType\r\n        };\r\n        this.stepsObserver.next(stepInfo);\r\n    }\r\n\r\n    protected notifyTourIsFinished() {\r\n        if (this.currentStep) this.currentStep.tourDone.emit();\r\n        this.stepsObserver.complete();\r\n    }\r\n    protected removeCurrentStep() {\r\n        if (this.currentStep) this.stepDrawerService.remove(this.currentStep);\r\n    }\r\n\r\n    protected scrollIfStepAndTargetAreNotVisible() {\r\n        this.scrollWhenTargetOrStepAreHiddenBottom();\r\n        this.scrollWhenTargetOrStepAreHiddenTop();\r\n    }\r\n\r\n    protected scrollWhenTargetOrStepAreHiddenBottom() {\r\n        let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\r\n        if (totalTargetBottom > this.winBottomPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\r\n        }\r\n    }\r\n\r\n    protected scrollWhenTargetOrStepAreHiddenTop() {\r\n        let totalTargetTop = this.getMaxTargetAndStepTopPosition();\r\n        if (totalTargetTop < this.winTopPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\r\n        }\r\n    }\r\n\r\n    protected getMaxTargetAndStepBottomPosition(): number {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return (\r\n                targetAbsoluteTop +\r\n                this.currentStep.stepInstance.targetHeight +\r\n                this.currentStep.stepInstance.stepHeight +\r\n                ARROW_SIZE +\r\n                DISTANCE_FROM_TARGET\r\n            );\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.max(\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2\r\n            );\r\n        }\r\n    }\r\n\r\n    protected getMaxTargetAndStepTopPosition() {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return targetAbsoluteTop;\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.min(\r\n                targetAbsoluteTop,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2\r\n            );\r\n        }\r\n    }\r\n\r\n    protected scrollIfElementBeyondOtherElements() {\r\n        // if (this.isElementBeyondOthers() === 2) {\r\n        //     this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\r\n        // }\r\n        // if (this.isElementBeyondOthers() === 2) {\r\n        //     this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\r\n        // }\r\n        // if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\r\n        //     this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\r\n        // }\r\n        // if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\r\n        //     this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\r\n        // }\r\n        this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\r\n    }\r\n\r\n    protected isElementBeyondOthers() {\r\n        return this.documentService.isElementBeyondOthers(\r\n            this.currentStep.targetViewContainer.element,\r\n            this.currentStep.isElementOrAncestorFixed,\r\n            'backdrop'\r\n        );\r\n    }\r\n\r\n    public refreshTour() {\r\n        if (this.currentStep) {\r\n            this.scrollIfElementBeyondOtherElements();\r\n            this.backDropService.redrawTarget(this.currentStep);\r\n            this.stepDrawerService.remove(this.currentStep);\r\n            this.drawStep(this.currentStep);\r\n            this.scrollIfStepAndTargetAreNotVisible();\r\n        }\r\n    }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","// typeof any so that it we don't have to cast when comparing a result to the error object\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map\n","/** PURE_IMPORTS_START _errorObject PURE_IMPORTS_END */\nimport { errorObject } from './errorObject';\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nexport function tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n//# sourceMappingURL=tryCatch.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport var config = {\n    /**\n     * The promise constructor used by default for methods such as\n     * {@link toPromise} and {@link forEach}\n     */\n    Promise: undefined,\n    /**\n     * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n     * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n     * call in a try/catch block. It also enables producer interference, a nasty bug\n     * where a multicast can be broken for all observers by a downstream consumer with\n     * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n     * FOR MIGRATION REASONS.\n     */\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x != null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\nexport { UnsubscriptionError };\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_tryCatch,_util_errorObject,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { tryCatch } from './util/tryCatch';\nimport { errorObject } from './util/errorObject';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = /*@__PURE__*/ (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        /** @internal */\n        this._parent = null;\n        /** @internal */\n        this._parents = null;\n        /** @internal */\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    /** @internal */\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    /** @nocollapse */\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? /*@__PURE__*/ Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        /** @internal */ _this.syncErrorValue = null;\n        /** @internal */ _this.syncErrorThrown = false;\n        /** @internal */ _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriberSymbol]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriberSymbol]);\n}\n//# sourceMappingURL=Subscriber.js.map\n","/** Symbol.observable or a string \"@@observable\". Used for interop */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\nexport { ArgumentOutOfRangeError };\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nvar EmptyError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\nexport { EmptyError };\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\nexport function finalize(callback) {\n    return function (source) { return source.lift(new FinallyOperator(callback)); };\n}\nvar FinallyOperator = /*@__PURE__*/ (function () {\n    function FinallyOperator(callback) {\n        this.callback = callback;\n    }\n    FinallyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n    };\n    return FinallyOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FinallySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n//# sourceMappingURL=finalize.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\nexport { ObjectUnsubscribedError };\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nvar TimeoutError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        _this.name = 'TimeoutError';\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\nexport { TimeoutError };\n//# sourceMappingURL=TimeoutError.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Subscription,_util_tryCatch,_util_errorObject,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { tryCatch } from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowToggle.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var result = clicks.windowToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * ).mergeAll();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\nexport function windowToggle(openings, closingSelector) {\n    return function (source) { return source.lift(new WindowToggleOperator(openings, closingSelector)); };\n}\nvar WindowToggleOperator = /*@__PURE__*/ (function () {\n    function WindowToggleOperator(openings, closingSelector) {\n        this.openings = openings;\n        this.closingSelector = closingSelector;\n    }\n    WindowToggleOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n    };\n    return WindowToggleOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowToggleSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_1 = contexts[index];\n                context_1.window.error(err);\n                context_1.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_2 = contexts[index];\n                context_2.window.complete();\n                context_2.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_3 = contexts[index];\n                context_3.window.unsubscribe();\n                context_3.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = tryCatch(closingSelector)(innerValue);\n            if (closingNotifier === errorObject) {\n                return this.error(errorObject.e);\n            }\n            else {\n                var window_1 = new Subject();\n                var subscription = new Subscription();\n                var context_4 = { window: window_1, subscription: subscription };\n                this.contexts.push(context_4);\n                var innerSubscription = subscribeToResult(this, closingNotifier, context_4);\n                if (innerSubscription.closed) {\n                    this.closeWindow(this.contexts.length - 1);\n                }\n                else {\n                    innerSubscription.context = context_4;\n                    subscription.add(innerSubscription);\n                }\n                this.destination.next(window_1);\n            }\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=windowToggle.js.map\n","import { StepActionType } from \"../services/joyride-steps-container.service\";\r\n\r\nexport class JoyrideStepInfo {\r\n    number: number;\r\n    name: string;\r\n    route: string;\r\n    actionType: StepActionType;\r\n}","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { JoyrideStepService } from './joyride-step.service';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideOptions } from '../models/joyride-options.class';\r\nimport { Observable, of } from 'rxjs';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class JoyrideService {\r\n    protected tourInProgress: boolean = false;\r\n    protected tour$: Observable<JoyrideStepInfo>;\r\n\r\n    constructor(\r\n        @Inject(PLATFORM_ID) protected platformId: Object,\r\n        protected readonly stepService: JoyrideStepService,\r\n        protected readonly optionsService: JoyrideOptionsService\r\n    ) {}\r\n\r\n    startTour(options?: JoyrideOptions): Observable<JoyrideStepInfo> {\r\n        if (!isPlatformBrowser(this.platformId)) {\r\n            return of(new JoyrideStepInfo());\r\n        }\r\n        if (!this.tourInProgress) {\r\n            this.tourInProgress = true;\r\n            if (options) {\r\n                this.optionsService.setOptions(options);\r\n            }\r\n            this.tour$ = this.stepService.startTour().pipe(finalize(() => (this.tourInProgress = false)));\r\n            this.tour$.subscribe();\r\n        }\r\n        return this.tour$;\r\n    }\r\n\r\n    closeTour(): void {\r\n        if (this.isTourInProgress()) this.stepService.close();\r\n    }\r\n\r\n    isTourInProgress(): boolean {\r\n        return this.tourInProgress;\r\n    }\r\n}\r\n","import { Component, Input, EventEmitter, Output } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-button',\r\n    templateUrl: './button.component.html',\r\n    styleUrls: ['./button.component.scss']\r\n})\r\nexport class JoyrideButtonComponent {\r\n    hover: boolean;\r\n    \r\n    @Input() \r\n    color: string;\r\n    \r\n    @Output()\r\n    clicked: EventEmitter<any> = new EventEmitter();\r\n\r\n    onClick() {\r\n        this.clicked.emit();\r\n    }\r\n}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'joy-close-button',\r\n    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <line x1=\"1\" y1=\"24\" \r\n                    x2=\"24\" y2=\"1\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n                <line x1=\"1\" y1=\"1\" \r\n                    x2=\"24\" y2=\"24\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n            </svg>`\r\n})\r\n\r\nexport class JoyrideCloseButtonComponent { }","\r\nimport { Component, Input, ViewEncapsulation } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-arrow',\r\n    templateUrl: './arrow.component.html',\r\n    styleUrls: ['./arrow.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideArrowComponent {\r\n    @Input()\r\n    position: string = 'top';\r\n}","import { NgModule, ModuleWithProviders } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { JoyrideDirective } from './directives/joyride.directive';\r\nimport { JoyrideService } from './services/joyride.service';\r\nimport { JoyrideStepComponent } from \"./components/step/joyride-step.component\";\r\nimport { JoyrideButtonComponent } from \"./components/button/button.component\";\r\nimport { JoyrideCloseButtonComponent } from \"./components/close-button/close-button.component\";\r\nimport { JoyrideStepService } from \"./services/joyride-step.service\";\r\nimport { JoyrideBackdropService } from \"./services/joyride-backdrop.service\";\r\nimport { JoyrideArrowComponent } from \"./components/arrow/arrow.component\";\r\nimport { EventListenerService } from \"./services/event-listener.service\";\r\nimport { JoyrideStepsContainerService } from \"./services/joyride-steps-container.service\";\r\nimport { DocumentService } from \"./services/document.service\";\r\nimport { JoyrideOptionsService } from './services/joyride-options.service';\r\nimport { StepDrawerService } from './services/step-drawer.service';\r\nimport { DomRefService } from './services/dom.service';\r\nimport { LoggerService } from './services/logger.service';\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { TemplatesService } from \"./services/templates.service\";\r\n\r\nexport const routerModuleForChild: ModuleWithProviders = RouterModule.forChild([]);\r\n\r\n@NgModule({\r\n    imports: [CommonModule, routerModuleForChild],\r\n    declarations: [\r\n        JoyrideDirective,\r\n        JoyrideStepComponent,\r\n        JoyrideArrowComponent,\r\n        JoyrideButtonComponent,\r\n        JoyrideCloseButtonComponent\r\n    ],\r\n    entryComponents: [JoyrideStepComponent],\r\n    exports: [\r\n        JoyrideDirective\r\n    ]\r\n})\r\nexport class JoyrideModule {\r\n    static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: [\r\n                JoyrideService,\r\n                JoyrideStepService,\r\n                JoyrideStepsContainerService,\r\n                JoyrideBackdropService,\r\n                EventListenerService,\r\n                DocumentService,\r\n                JoyrideOptionsService,\r\n                StepDrawerService,\r\n                DomRefService,\r\n                LoggerService,\r\n                TemplatesService\r\n            ]\r\n        }\r\n    }\r\n    static forChild(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: []\r\n        }\r\n    }\r\n}\r\n"],"names":["StepActionType","this","title","ReplaySubject","text","DEFAULT_THEME_COLOR","STEP_DEFAULT_POSITION","DEFAULT_TEXTS","prev","of","next","done","close","JoyrideOptionsService","options","stepsOrder","steps","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","themeColor","firstStep","startWith","waitingTime","customTexts","setCustomText","hexToRgb","texts","toObservable","value","Observable","hex","replace","m","r","g","b","result","exec","parseInt","Injectable","JOYRIDE","optionService","LoggerService","message","data","areLogsEnabled","console","debug","info","warn","error","_super","Object","setPrototypeOf","_this","JoyrideError","prototype","__extends","Error","JoyrideStepDoesNotExist","JoyrideStepOutOfRange","stepOptions","logger","Subject","JoyrideStepsContainerService","getFirstStep","index","getStepsOrder","indexOf","undefined","currentStepIndex","getFirstStepIndex","forEach","stepId","push","id","step","stepToAdd","tempSteps","filter","name","length","stepIndexToReplace","findIndex","action","NEXT","stepName","getStepName","stepFound","stepID","includes","split","position","getStepIndex","stepHasBeenModified","map","platformId","body","documentElement","document","fakeDocument","navigator","DomRefService","isPlatformBrowser","window","fakeWindow","__param","Inject","PLATFORM_ID","TemplatesService","template","_prevButton","_nextButton","_doneButton","_counter","NO_POSITION","joyrideStepsContainer","viewContainerRef","domService","router","templateService","EventEmitter","windowRef","getNativeWindow","JoyrideStep","JoyrideDirective","prevTemplate","setPrevButton","nextTemplate","setNextButton","doneTemplate","setDoneButton","counterTemplate","setCounter","stepPosition","targetViewContainer","setAsyncFields","stepContent","stepContentParams","nextClicked","prevCliked","tourDone","route","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","addStep","changes","subscriptions","subscribe","nodeName","sub","unsubscribe","__decorate","Input","TemplateRef","Output","Directive","selector","ViewContainerRef","Router","DOMService","setDocumentHeight","elementsFromPoint","bind","DocumentService","elementRef","getBoundingClientRect","top","left","scrollOffsets","getScrollOffsets","y","x","documentHeight","calculateDocumentHeight","getFirstScrollableParent","getNativeDocument","keywordToDiscard","x1","getElementFixedLeft","getElementAbsoluteLeft","y1","getElementFixedTop","getElementAbsoluteTop","x2","width","y2","height","elements1","elements2","getFirstElementWithoutKeyword","firstScrollableParent","scrollTo","scrollTop","scrollHeight","clientHeight","node","regex","style","prop","getPropertyValue","scrollparent","test","scroll","parentNode","documentRef","Math","max","offsetHeight","winReference","docReference","pageXOffset","pageYOffset","compatMode","scrollLeft","parents","parent","elem","elementFromPoint","pointerEvents","elements","keyword","classList","toString","shift","documentService","optionsService","rendererFactory","setRenderer","JoyrideBackdropService","renderer","createRenderer","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","currentBackdropContainer","createElement","addClass","setStyle","setAttribute","backdropContent","appendChild","backdropTop","lastYScroll","getBackdropColor","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","lastXScroll","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeLastBackdrop","drawCurrentBackdrop","lastBackdropContainer","handleVerticalScroll","handleHorizontalScroll","targetVC","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","RendererFactory2","EventListenerService","scrollUnlisten","listen","evt","scrollEvent","resizeUnlisten","resizeEvent","STEP_MIN_WIDTH","STEP_HEIGHT","injector","stepsContainerService","eventListenerService","ARROW_SIZE","JoyrideStepComponent","joyrideStepService","get","JoyrideStepService","getDocumentHeight","subscribeToResizeEvents","asObservable","setCustomTemplates","setCustomTexts","counter","getCounter","isCounterVisible","isPrevButtonVisible","getThemeColor","val","checkRedraw","isCustomized","stepContainer","CUSTOM_STEP_MAX_WIDTH_VW","updateStepDimensions","STEP_MAX_WIDTH","dimensions","getDimensionsByAspectRatio","clientWidth","adjustDimensions","stepWidth","stepHeight","drawStep","setTimeout","redrawStep","getPrevButton","getNextButton","getDoneButton","customeTexts","getCustomTexts","prevText","nextText","doneText","stepHolder","targetWidth","targetHeight","setStepStyle","getStepNumber","numberOfSteps","getStepsCount","counterData","total","customContent","ctx","customPrevButton","customNextButton","customDoneButton","customCounter","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","updatePosition","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","arrowTopPosition","leftPosition","stepAbsoluteLeft","arrowLeftPosition","arrowSize","adjustLeftPosition","adjustRightPosition","arrowPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","showArrow","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","aspectRatio","calcHeight","newWidth","newHeight","subscription","ViewChild","ElementRef","Injector","Renderer2","componentFactoryResolver","appRef","StepDrawerService","ref","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","instance","changeDetectorRef","detectChanges","stepInstance","refMap","detachView","destroy","ComponentFactoryResolver","ApplicationRef","backDropService","eventListener","stepDrawerService","initViewportPositions","subscribeToScrollEvents","winTopPosition","winBottomPosition","innerHeight","startListeningScrollEvents","currentStep","redraw","redrawTarget","getStepDefaultPosition","draw","stepsObserver","init","tryShowStep","startListeningResizeEvents","subscribeToStepsUpdates","removeCurrentStep","notifyTourIsFinished","stopListeningResizeEvents","remove","emit","PREV","stepRoute","getStepRoute","navigate","updatedStep","actionType","navigateToStepPage","timeout","getWaitingTime","showStep","scrollIfElementBeyondOtherElements","scrollIfStepAndTargetAreNotVisible","notifyStepClicked","stepInfo","number","complete","scrollWhenTargetOrStepAreHiddenBottom","scrollWhenTargetOrStepAreHiddenTop","totalTargetBottom","getMaxTargetAndStepBottomPosition","scrollBy","totalTargetTop","getMaxTargetAndStepTopPosition","min","scrollIntoView","isElementBeyondOthers","extendStatics","d","__proto__","Array","p","hasOwnProperty","__","constructor","tryCatchTarget","errorObject","e","tryCatcher","apply","arguments","tryCatch","fn","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","config","Promise","useDeprecatedSynchronousErrorHandling","stack","hostReportError","err","empty","closed","isArray","isObject","UnsubscriptionError","errors","call","i","join","tslib_1.__extends","Subscription","_parent","_parents","_subscriptions","_unsubscribe","hasErrors","len","flattenUnsubscriptionErrors","concat","add","teardown","EMPTY","_addParent","tmp","subscriptionIndex","splice","reduce","errs","rxSubscriber","Symbol","for","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","emptyObserver","isTrustedSubscriber","trustedSubscriber","rxSubscriberSymbol","SafeSubscriber","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","context","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","obj","observable","FinallyOperator","callback","source","FinallySubscriber","stepService","JoyrideService","tourInProgress","setOptions","tour$","startTour","pipe","lift","JoyrideStepInfo","isTourInProgress","JoyrideButtonComponent","clicked","JoyrideCloseButtonComponent","Component","JoyrideArrowComponent","routerModuleForChild","RouterModule","forChild","JoyrideModule","ngModule","JoyrideModule_1","providers","NgModule","imports","CommonModule","declarations","entryComponents","exports"],"mappings":"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"}