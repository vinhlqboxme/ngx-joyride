!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/core"),require("@angular/common"),require("@angular/router")):"function"==typeof define&&define.amd?define(["exports","rxjs","@angular/core","@angular/common","@angular/router"],e):e(t["ngx-joyride"]={},t.rxjs,t.core,t.common,t.router)}(this,function(t,e,i,o,n){"use strict";function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function s(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var p=t.length-1;p>=0;p--)(n=t[p])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e){return function(i,o){e(i,o,t)}}var h,a=function(){return function(){this.title=new e.ReplaySubject,this.text=new e.ReplaySubject}}(),u="#3b5560",l="bottom",d=function(){return function(){}}(),f={prev:e.of("prev"),next:e.of("next"),done:e.of("done"),close:e.of(null)},y=function(){function t(){this.themeColor=u,this.stepDefaultPosition=l,this.logsEnabled=!0,this.showCounter=!0,this.showPrevButton=!0,this.stepsOrder=[]}return t.prototype.setOptions=function(t){this.stepsOrder=t.steps,this.stepDefaultPosition=t.stepDefaultPosition?t.stepDefaultPosition:this.stepDefaultPosition,this.logsEnabled=void 0!==t.logsEnabled?t.logsEnabled:this.logsEnabled,this.showCounter=void 0!==t.showCounter?t.showCounter:this.showCounter,this.showPrevButton=void 0!==t.showPrevButton?t.showPrevButton:this.showPrevButton,this.themeColor=t.themeColor?t.themeColor:this.themeColor,this.firstStep=t.startWith,this.waitingTime=void 0!==t.waitingTime?t.waitingTime:1,void 0!==t.customTexts?this.setCustomText(t.customTexts):this.setCustomText(f)},t.prototype.getBackdropColor=function(){return this.hexToRgb(this.themeColor)},t.prototype.getThemeColor=function(){return this.themeColor},t.prototype.getStepDefaultPosition=function(){return this.stepDefaultPosition},t.prototype.getStepsOrder=function(){return this.stepsOrder},t.prototype.getFirstStep=function(){return this.firstStep},t.prototype.getWaitingTime=function(){return this.waitingTime},t.prototype.areLogsEnabled=function(){return this.logsEnabled},t.prototype.isCounterVisible=function(){return this.showCounter},t.prototype.isPrevButtonVisible=function(){return this.showPrevButton},t.prototype.getCustomTexts=function(){return this.customTexts},t.prototype.setCustomText=function(t){var e,i,o,n;e=t.prev?t.prev:f.prev,i=t.next?t.next:f.next,o=t.done?t.done:f.done,n=t.close?t.close:f.close,this.customTexts={prev:this.toObservable(e),next:this.toObservable(i),done:this.toObservable(o),close:this.toObservable(n)}},t.prototype.toObservable=function(t){return t instanceof e.Observable?t:e.of(t)},t.prototype.hexToRgb=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,o){return e+e+i+i+o+o});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},t=s([i.Injectable()],t)}(),v="ngx-joyride:::",g=function(){function t(t){this.optionService=t}var e;return t.prototype.debug=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.debug(v+t,e)},t.prototype.info=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.info(v+t,e)},t.prototype.warn=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.warn(v+t,e)},t.prototype.error=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.error(v+t,e)},t=s([i.Injectable(),p("design:paramtypes",["function"==typeof(e=void 0!==y&&y)?e:Object])],t)}(),b=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return r(e,t),e}(Error),m=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return r(e,t),e}(Error),S=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return r(e,t),e}(Error);(h=t.StepActionType||(t.StepActionType={})).NEXT="NEXT",h.PREV="PREV";var w=function(){function o(t,i){this.stepOptions=t,this.logger=i,this.tempSteps=[],this.currentStepIndex=-2,this.stepHasBeenModified=new e.Subject}var n,r;return o.prototype.getFirstStepIndex=function(){var t=this.stepOptions.getFirstStep(),e=this.stepOptions.getStepsOrder().indexOf(t);return e<0&&(e=0,void 0!==t&&this.logger.warn("The step "+t+" does not exist. Check in your step list if it's present.")),e},o.prototype.init=function(){var t=this;this.logger.info("Initializing the steps array."),this.steps=[],this.currentStepIndex=this.getFirstStepIndex()-1,this.stepOptions.getStepsOrder().forEach(function(e){return t.steps.push({id:e,step:null})})},o.prototype.addStep=function(t){if(this.tempSteps.filter(function(e){return e.name===t.name}).length>0){var e=this.tempSteps.findIndex(function(e){return e.name===t.name});this.tempSteps[e]=t}else this.logger.info("Adding step "+t.name+" to the steps list."),this.tempSteps.push(t)},o.prototype.get=function(e){if(e===t.StepActionType.NEXT?this.currentStepIndex++:this.currentStepIndex--,this.currentStepIndex<0||this.currentStepIndex>=this.steps.length)throw new S("The first or last step of the tour cannot be found!");var i=this.getStepName(this.steps[this.currentStepIndex].id),o=this.tempSteps.findIndex(function(t){return t.name===i}),n=this.tempSteps[o];return this.steps[this.currentStepIndex].step=n,null==n&&this.logger.warn("Step "+this.steps[this.currentStepIndex].id+" not found in the DOM. Check if it's hidden by *ngIf directive."),n},o.prototype.getStepRoute=function(e){var i;return(i=e===t.StepActionType.NEXT?this.steps[this.currentStepIndex+1]?this.steps[this.currentStepIndex+1].id:null:this.steps[this.currentStepIndex-1]?this.steps[this.currentStepIndex-1].id:null)&&i.includes("@")?i.split("@")[1]:""},o.prototype.updatePosition=function(t,e){var i=this.getStepIndex(t);this.steps[i].step?(this.steps[i].step.position=e,this.stepHasBeenModified.next(this.steps[i].step)):this.logger.warn("Trying to modify the position of "+t+" to "+e+". Step not found!Is this step located in a different route?")},o.prototype.getStepNumber=function(t){return this.getStepIndex(t)+1},o.prototype.getStepsCount=function(){return this.stepOptions.getStepsOrder().length},o.prototype.getStepIndex=function(t){var e=this.steps.map(function(t){return t.id.includes("@")?t.id.split("@")[0]:t.id}).findIndex(function(e){return t===e});if(-1===e)throw new b("The step with name: "+t+" does not exist in the step list.");return e},o.prototype.getStepName=function(t){return t&&t.includes("@")?t.split("@")[0]:t},o=s([i.Injectable(),p("design:paramtypes",["function"==typeof(n=void 0!==y&&y)?n:Object,"function"==typeof(r=void 0!==g&&g)?r:Object])],o)}(),x=function(){function t(t){this.platformId=t,this.fakeDocument={body:{},documentElement:{}},this.fakeWindow={document:this.fakeDocument,navigator:{}}}var e;return t.prototype.getNativeWindow=function(){return o.isPlatformBrowser(this.platformId)?window:this.fakeWindow},t.prototype.getNativeDocument=function(){return o.isPlatformBrowser(this.platformId)?document:this.fakeDocument},t=s([i.Injectable(),c(0,i.Inject(i.PLATFORM_ID)),p("design:paramtypes",["function"==typeof(e="undefined"!=typeof Object&&Object)?e:Object])],t)}(),T=function(){function t(){}return t.prototype.setPrevButton=function(t){this._prevButton=t},t.prototype.getPrevButton=function(){return this._prevButton},t.prototype.setNextButton=function(t){this._nextButton=t},t.prototype.getNextButton=function(){return this._nextButton},t.prototype.setDoneButton=function(t){this._doneButton=t},t.prototype.getDoneButton=function(){return this._doneButton},t.prototype.setCounter=function(t){this._counter=t},t.prototype.getCounter=function(){return this._counter},t=s([i.Injectable()],t)}(),C="NO_POSITION",E=function(){function t(t,e,o,n,r,s){this.joyrideStepsContainer=t,this.viewContainerRef=e,this.domService=o,this.router=n,this.templateService=r,this.platformId=s,this.stepPosition=C,this.prev=new i.EventEmitter,this.next=new i.EventEmitter,this.done=new i.EventEmitter,this.subscriptions=[],this.windowRef=this.domService.getNativeWindow(),this.step=new a}var r,h,u,l,d,f,y,v,g,m,S,E,O,j,_;return t.prototype.ngAfterViewInit=function(){if(o.isPlatformBrowser(this.platformId)){if(this.prevTemplate&&this.templateService.setPrevButton(this.prevTemplate),this.nextTemplate&&this.templateService.setNextButton(this.nextTemplate),this.doneTemplate&&this.templateService.setDoneButton(this.doneTemplate),this.counterTemplate&&this.templateService.setCounter(this.counterTemplate),this.step.position=this.stepPosition,this.step.targetViewContainer=this.viewContainerRef,this.setAsyncFields(this.step),this.step.stepContent=this.stepContent,this.step.stepContentParams=this.stepContentParams,this.step.nextClicked=this.next,this.step.prevCliked=this.prev,this.step.tourDone=this.done,!this.name)throw new b("All the steps should have the 'joyrideStep' property set with a custom name.");this.step.name=this.name,this.step.route="/"===this.router.url.substr(0,1)?this.router.url.substr(1):this.router.url,this.step.transformCssStyle=this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform,this.step.isElementOrAncestorFixed=this.isElementFixed(this.viewContainerRef.element)||this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement),this.joyrideStepsContainer.addStep(this.step)}},t.prototype.ngOnChanges=function(t){(t.title||t.text)&&this.setAsyncFields(this.step)},t.prototype.isElementFixed=function(t){return"fixed"===this.windowRef.getComputedStyle(t.nativeElement).position},t.prototype.setAsyncFields=function(t){this.title instanceof e.Observable?this.subscriptions.push(this.title.subscribe(function(e){t.title.next(e)})):t.title.next(this.title),this.text instanceof e.Observable?this.subscriptions.push(this.text.subscribe(function(e){t.text.next(e)})):t.text.next(this.text)},t.prototype.isAncestorsFixed=function(t){if(!t||!t.parentElement)return!1;var e="fixed"===this.windowRef.getComputedStyle(t.parentElement).position;return"BODY"===t.nodeName?e:!!e||this.isAncestorsFixed(t.parentElement)},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(t){t.unsubscribe()})},s([i.Input("joyrideStep"),p("design:type",String)],t.prototype,"name",void 0),s([i.Input(),p("design:type",String)],t.prototype,"nextStep",void 0),s([i.Input(),p("design:type",Object)],t.prototype,"title",void 0),s([i.Input(),p("design:type",Object)],t.prototype,"text",void 0),s([i.Input(),p("design:type",String)],t.prototype,"stepPosition",void 0),s([i.Input(),p("design:type","function"==typeof(r=void 0!==i.TemplateRef&&i.TemplateRef)?r:Object)],t.prototype,"stepContent",void 0),s([i.Input(),p("design:type","function"==typeof(h="undefined"!=typeof Object&&Object)?h:Object)],t.prototype,"stepContentParams",void 0),s([i.Input(),p("design:type","function"==typeof(u=void 0!==i.TemplateRef&&i.TemplateRef)?u:Object)],t.prototype,"prevTemplate",void 0),s([i.Input(),p("design:type","function"==typeof(l=void 0!==i.TemplateRef&&i.TemplateRef)?l:Object)],t.prototype,"nextTemplate",void 0),s([i.Input(),p("design:type","function"==typeof(d=void 0!==i.TemplateRef&&i.TemplateRef)?d:Object)],t.prototype,"doneTemplate",void 0),s([i.Input(),p("design:type","function"==typeof(f=void 0!==i.TemplateRef&&i.TemplateRef)?f:Object)],t.prototype,"counterTemplate",void 0),s([i.Output(),p("design:type","function"==typeof(y=void 0!==i.EventEmitter&&i.EventEmitter)?y:Object)],t.prototype,"prev",void 0),s([i.Output(),p("design:type","function"==typeof(v=void 0!==i.EventEmitter&&i.EventEmitter)?v:Object)],t.prototype,"next",void 0),s([i.Output(),p("design:type","function"==typeof(g=void 0!==i.EventEmitter&&i.EventEmitter)?g:Object)],t.prototype,"done",void 0),t=s([i.Directive({selector:"joyrideStep, [joyrideStep]"}),c(5,i.Inject(i.PLATFORM_ID)),p("design:paramtypes",["function"==typeof(m=void 0!==w&&w)?m:Object,"function"==typeof(S=void 0!==i.ViewContainerRef&&i.ViewContainerRef)?S:Object,"function"==typeof(E=void 0!==x&&x)?E:Object,"function"==typeof(O=void 0!==n.Router&&n.Router)?O:Object,"function"==typeof(j=void 0!==T&&T)?j:Object,"function"==typeof(_="undefined"!=typeof Object&&Object)?_:Object])],t)}(),O=function(){function t(t){this.DOMService=t,this.setDocumentHeight(),document.elementsFromPoint||(document.elementsFromPoint=this.elementsFromPoint.bind(this))}var e;return t.prototype.getElementFixedTop=function(t){return t.nativeElement.getBoundingClientRect().top},t.prototype.getElementFixedLeft=function(t){return t.nativeElement.getBoundingClientRect().left},t.prototype.getElementAbsoluteTop=function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().top+e.y},t.prototype.getElementAbsoluteLeft=function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().left+e.x},t.prototype.setDocumentHeight=function(){this.documentHeight=this.calculateDocumentHeight()},t.prototype.getDocumentHeight=function(){return this.documentHeight},t.prototype.isParentScrollable=function(t){return this.getFirstScrollableParent(t.nativeElement)!==this.DOMService.getNativeDocument().body},t.prototype.isElementBeyondOthers=function(t,e,i){var o=e?this.getElementFixedLeft(t):this.getElementAbsoluteLeft(t),n=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t),r=o+t.nativeElement.getBoundingClientRect().width-1,s=n+t.nativeElement.getBoundingClientRect().height-1,p=this.DOMService.getNativeDocument().elementsFromPoint(o,n),c=this.DOMService.getNativeDocument().elementsFromPoint(r,s);return 0===p.length&&0===c.length?1:this.getFirstElementWithoutKeyword(p,i)!==t.nativeElement||this.getFirstElementWithoutKeyword(c,i)!==t.nativeElement?2:3},t.prototype.scrollIntoView=function(t,e){var i=this.getFirstScrollableParent(t.nativeElement),o=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t);i!==this.DOMService.getNativeDocument().body?i.scrollTo?i.scrollTo(0,o-150):i.scrollTop=o-150:this.DOMService.getNativeWindow().scrollTo(0,o-150)},t.prototype.scrollToTheTop=function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,0):e.scrollTop=0:this.DOMService.getNativeWindow().scrollTo(0,0)},t.prototype.scrollToTheBottom=function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight):e.scrollTop=e.scrollHeight-e.clientHeight:this.DOMService.getNativeWindow().scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight)},t.prototype.getFirstScrollableParent=function(t){var e=this,i=/(auto|scroll|overlay)/,o=function(t,i){return e.DOMService.getNativeWindow().getComputedStyle(t,null).getPropertyValue(i)},n=function(t){return t&&t!==e.DOMService.getNativeDocument().body?function(t){return i.test(o(t,"overflow")+o(t,"overflow-y")+o(t,"overflow-x"))}(t)?t:n(t.parentNode):e.DOMService.getNativeDocument().body};return n(t)},t.prototype.calculateDocumentHeight=function(){var t=this.DOMService.getNativeDocument();return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight)},t.prototype.getScrollOffsets=function(){var t=this.DOMService.getNativeWindow(),e=this.DOMService.getNativeDocument();return null!=t.pageXOffset?{x:t.pageXOffset,y:t.pageYOffset}:"CSS1Compat"==e.compatMode?{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}:{x:e.body.scrollLeft,y:e.body.scrollTop}},t.prototype.elementsFromPoint=function(t,e){var i=[],o=void 0;do{var n=this.DOMService.getNativeDocument().elementFromPoint(t,e);n&&o!==n?(o=n,i.push(o),o.style.pointerEvents="none"):o=!1}while(o);return i.forEach(function(t){return t.style.pointerEvents="all"}),i},t.prototype.getFirstElementWithoutKeyword=function(t,e){for(;t[0]&&t[0].classList.toString().includes(e);)t.shift();return t[0]},t=s([i.Injectable(),p("design:paramtypes",["function"==typeof(e=void 0!==x&&x)?e:Object])],t)}(),j=function(){function t(t,e,i){this.documentService=t,this.optionsService=e,this.rendererFactory=i,this.lastXScroll=0,this.lastYScroll=0,this.setRenderer()}var e,o,n;return t.prototype.setRenderer=function(){this.renderer=this.rendererFactory.createRenderer(null,null)},t.prototype.draw=function(t){this.elementRef=t.targetViewContainer,this.targetAbsoluteTop=this.getTargetTotalTop(t),this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.currentBackdropContainer=this.renderer.createElement("div"),this.renderer.addClass(this.currentBackdropContainer,"backdrop-container"),this.renderer.setStyle(this.currentBackdropContainer,"position","fixed"),this.renderer.setStyle(this.currentBackdropContainer,"top","0px"),this.renderer.setStyle(this.currentBackdropContainer,"left","0px"),this.renderer.setStyle(this.currentBackdropContainer,"width","100%"),this.renderer.setStyle(this.currentBackdropContainer,"height","100%"),this.renderer.setStyle(this.currentBackdropContainer,"z-index","1000"),this.renderer.setAttribute(this.currentBackdropContainer,"id","backdrop-"+t.name),this.backdropContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropContent,"backdrop-content"),this.renderer.setStyle(this.backdropContent,"position","relative"),this.renderer.setStyle(this.backdropContent,"height","100%"),this.renderer.setStyle(this.backdropContent,"display","flex"),this.renderer.setStyle(this.backdropContent,"flex-direction","column"),this.renderer.appendChild(this.currentBackdropContainer,this.backdropContent),this.backdropTop=this.renderer.createElement("div"),this.renderer.addClass(this.backdropTop,"joyride-backdrop"),this.renderer.addClass(this.backdropTop,"backdrop-top"),this.renderer.setStyle(this.backdropTop,"width","100%"),this.renderer.setStyle(this.backdropTop,"height",this.targetAbsoluteTop-this.lastYScroll+"px"),this.renderer.setStyle(this.backdropTop,"flex-shrink","0"),this.renderer.setStyle(this.backdropTop,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropContent,this.backdropTop),this.backdropMiddleContainer=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContainer,"backdrop-middle-container"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"width","100%"),this.renderer.setStyle(this.backdropMiddleContainer,"flex-shrink","0"),this.renderer.appendChild(this.backdropContent,this.backdropMiddleContainer),this.backdropMiddleContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContent,"backdrop-middle-content"),this.renderer.setStyle(this.backdropMiddleContent,"display","flex"),this.renderer.setStyle(this.backdropMiddleContent,"width","100%"),this.renderer.setStyle(this.backdropMiddleContent,"height","100%"),this.renderer.appendChild(this.backdropMiddleContainer,this.backdropMiddleContent),this.leftBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.leftBackdrop,"joyride-backdrop"),this.renderer.addClass(this.leftBackdrop,"backdrop-left"),this.renderer.setStyle(this.leftBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.leftBackdrop,"width",this.targetAbsoluteLeft-this.lastXScroll+"px"),this.renderer.setStyle(this.leftBackdrop,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropMiddleContent,this.leftBackdrop),this.targetBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.targetBackdrop,"backdrop-target"),this.renderer.setStyle(this.targetBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px"),this.renderer.appendChild(this.backdropMiddleContent,this.targetBackdrop),this.rightBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.rightBackdrop,"joyride-backdrop"),this.renderer.addClass(this.rightBackdrop,"backdrop-right"),this.renderer.setStyle(this.rightBackdrop,"width","100%"),this.renderer.setStyle(this.rightBackdrop,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropMiddleContent,this.rightBackdrop),this.backdropBottom=this.renderer.createElement("div"),this.renderer.addClass(this.backdropBottom,"joyride-backdrop"),this.renderer.addClass(this.backdropBottom,"backdrop-bottom"),this.renderer.setStyle(this.backdropBottom,"width","100%"),this.renderer.setStyle(this.backdropBottom,"height","100%"),this.renderer.setStyle(this.backdropBottom,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropContent,this.backdropBottom),this.removeLastBackdrop(),this.drawCurrentBackdrop(),this.lastBackdropContainer=this.currentBackdropContainer},t.prototype.remove=function(){this.removeLastBackdrop()},t.prototype.redrawTarget=function(t){this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.targetAbsoluteTop=this.getTargetTotalTop(t),this.handleVerticalScroll(t),this.handleHorizontalScroll(t)},t.prototype.getTargetTotalTop=function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedTop(e.element):this.documentService.getElementAbsoluteTop(e.element)},t.prototype.getTargetTotalLeft=function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedLeft(e.element):this.documentService.getElementAbsoluteLeft(e.element)},t.prototype.redraw=function(t,e){this.lastYScroll!==e.scrollY&&(this.lastYScroll=e.scrollY,this.elementRef&&this.handleVerticalScroll(t)),this.lastXScroll!==e.scrollX&&(this.lastXScroll=e.scrollX,this.elementRef&&this.handleHorizontalScroll(t))},t.prototype.handleHorizontalScroll=function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteLeft:this.targetAbsoluteLeft-this.lastXScroll;e>=0?(this.renderer.setStyle(this.leftBackdrop,"width",e+"px"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px")):this.handleTargetPartialWidth(e)},t.prototype.handleTargetPartialWidth=function(t){this.renderer.setStyle(this.leftBackdrop,"width","0px");var e=this.elementRef.element.nativeElement.offsetWidth+t;e>=0?this.renderer.setStyle(this.targetBackdrop,"width",e+"px"):this.renderer.setStyle(this.targetBackdrop,"width","0px")},t.prototype.handleVerticalScroll=function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteTop:this.targetAbsoluteTop-this.lastYScroll;e>=0?(this.renderer.setStyle(this.backdropTop,"height",e+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px")):this.handleTargetPartialHeight(e)},t.prototype.handleTargetPartialHeight=function(t){this.renderer.setStyle(this.backdropTop,"height","0px");var e=this.elementRef.element.nativeElement.offsetHeight+t;e>=0?this.renderer.setStyle(this.backdropMiddleContainer,"height",e+"px"):this.renderer.setStyle(this.backdropMiddleContainer,"height","0px")},t.prototype.removeLastBackdrop=function(){this.lastBackdropContainer&&(this.renderer.removeChild(document.body,this.lastBackdropContainer),this.lastBackdropContainer=void 0)},t.prototype.drawCurrentBackdrop=function(){this.renderer.appendChild(document.body,this.currentBackdropContainer)},t=s([i.Injectable(),p("design:paramtypes",["function"==typeof(e=void 0!==O&&O)?e:Object,"function"==typeof(o=void 0!==y&&y)?o:Object,"function"==typeof(n=void 0!==i.RendererFactory2&&i.RendererFactory2)?n:Object])],t)}(),_=function(){return function(){}}(),P=function(){function t(t,i){this.rendererFactory=t,this.DOMService=i,this.scrollEvent=new e.Subject,this.resizeEvent=new e.Subject,this.renderer=t.createRenderer(null,null)}var o,n;return t.prototype.startListeningScrollEvents=function(){var t=this;this.scrollUnlisten=this.renderer.listen("document","scroll",function(e){t.scrollEvent.next({scrollX:t.DOMService.getNativeWindow().pageXOffset,scrollY:t.DOMService.getNativeWindow().pageYOffset})})},t.prototype.startListeningResizeEvents=function(){var t=this;this.resizeUnlisten=this.renderer.listen("window","resize",function(e){t.resizeEvent.next(e)})},t.prototype.stopListeningScrollEvents=function(){this.scrollUnlisten()},t.prototype.stopListeningResizeEvents=function(){this.resizeUnlisten()},t=s([i.Injectable(),p("design:paramtypes",["function"==typeof(o=void 0!==i.RendererFactory2&&i.RendererFactory2)?o:Object,"function"==typeof(n=void 0!==x&&x)?n:Object])],t)}(),k=200,B=200,A=function(){function t(t,e,i,o,n,r,s,p){this.injector=t,this.stepsContainerService=e,this.eventListenerService=i,this.documentService=o,this.renderer=n,this.logger=r,this.optionsService=s,this.templateService=p,this.stepWidth=k,this.stepHeight=B,this.showArrow=!0,this.arrowSize=I,this.subscriptions=[]}var e,o,n,r,c,h,u,l,d,f,v;return t.prototype.ngOnInit=function(){var t=this;this.joyrideStepService=this.injector.get(H),this.documentHeight=this.documentService.getDocumentHeight(),this.subscriptions.push(this.subscribeToResizeEvents()),this.title=this.step.title.asObservable(),this.text=this.step.text.asObservable(),this.setCustomTemplates(),this.setCustomTexts(),this.counter=this.getCounter(),this.isCounterVisible=this.optionsService.isCounterVisible(),this.isPrevButtonVisible=this.optionsService.isPrevButtonVisible(),this.themeColor=this.optionsService.getThemeColor(),this.text&&this.text.subscribe(function(e){return t.checkRedraw(e)}),this.title&&this.title.subscribe(function(e){return t.checkRedraw(e)})},t.prototype.ngAfterViewInit=function(){if(this.isCustomized())this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","90vw"),this.updateStepDimensions();else{this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","400px");var t=this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth,this.stepContainer.nativeElement.clientHeight,1.212);t=this.adjustDimensions(t.width,t.height),this.stepWidth=t.width,this.stepHeight=t.height,this.renderer.setStyle(this.stepContainer.nativeElement,"width",this.stepWidth+"px"),this.renderer.setStyle(this.stepContainer.nativeElement,"height",this.stepHeight+"px")}this.drawStep()},t.prototype.checkRedraw=function(t){var e=this;null!=t&&setTimeout(function(){e.redrawStep()},2)},t.prototype.isCustomized=function(){return this.step.stepContent||this.templateService.getCounter()||this.templateService.getPrevButton()||this.templateService.getNextButton()||this.templateService.getDoneButton()},t.prototype.setCustomTexts=function(){var t=this.optionsService.getCustomTexts();this.prevText=t.prev,this.nextText=t.next,this.doneText=t.done},t.prototype.drawStep=function(){var t=this.step.isElementOrAncestorFixed?"fixed":"absolute";this.renderer.setStyle(this.stepHolder.nativeElement,"position",t),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",this.step.transformCssStyle),this.targetWidth=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width,this.targetHeight=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height,this.targetAbsoluteLeft="fixed"===t?this.documentService.getElementFixedLeft(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element),this.targetAbsoluteTop="fixed"===t?this.documentService.getElementFixedTop(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element),this.setStepStyle()},t.prototype.getCounter=function(){var t=this.stepsContainerService.getStepNumber(this.step.name),e=this.stepsContainerService.getStepsCount();return this.counterData={step:t,total:e},t+"/"+e},t.prototype.setCustomTemplates=function(){this.customContent=this.step.stepContent,this.ctx=this.step.stepContentParams,this.customPrevButton=this.templateService.getPrevButton(),this.customNextButton=this.templateService.getNextButton(),this.customDoneButton=this.templateService.getDoneButton(),this.customCounter=this.templateService.getCounter()},t.prototype.prev=function(){this.joyrideStepService.prev()},t.prototype.next=function(){this.joyrideStepService.next()},t.prototype.close=function(){this.joyrideStepService.close()},t.prototype.isFirstStep=function(){return 1===this.stepsContainerService.getStepNumber(this.step.name)},t.prototype.isLastStep=function(){return this.stepsContainerService.getStepNumber(this.step.name)===this.stepsContainerService.getStepsCount()},t.prototype.setStepStyle=function(){switch(this.step.position){case"top":this.setStyleTop();break;case"bottom":this.setStyleBottom();break;case"right":this.setStyleRight();break;case"left":this.setStyleLeft();break;case"center":this.setStyleCenter();break;default:this.setStyleBottom()}},t.prototype.setStyleTop=function(){this.stepsContainerService.updatePosition(this.step.name,"top"),this.topPosition=this.targetAbsoluteTop-R-this.stepHeight,this.stepAbsoluteTop=this.targetAbsoluteTop-R-this.stepHeight,this.arrowTopPosition=this.stepHeight,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="bottom",this.autofixTopPosition()},t.prototype.setStyleRight=function(){this.stepsContainerService.updatePosition(this.step.name,"right"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft+this.targetWidth+R,this.stepAbsoluteLeft=this.targetAbsoluteLeft+this.targetWidth+R,this.arrowLeftPosition=-this.arrowSize,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="left",this.autofixRightPosition()},t.prototype.setStyleBottom=function(){this.stepsContainerService.updatePosition(this.step.name,"bottom"),this.topPosition=this.targetAbsoluteTop+this.targetHeight+R,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight+R,this.arrowTopPosition=-this.arrowSize,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="top",this.autofixBottomPosition()},t.prototype.setStyleLeft=function(){this.stepsContainerService.updatePosition(this.step.name,"left"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft-this.stepWidth-R,this.stepAbsoluteLeft=this.targetAbsoluteLeft-this.stepWidth-R,this.arrowLeftPosition=this.stepWidth,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="right",this.autofixLeftPosition()},t.prototype.setStyleCenter=function(){this.renderer.setStyle(this.stepHolder.nativeElement,"position","fixed"),this.renderer.setStyle(this.stepHolder.nativeElement,"top","50%"),this.renderer.setStyle(this.stepHolder.nativeElement,"left","50%"),this.updateStepDimensions(),this.renderer.setStyle(this.stepHolder.nativeElement,"transform","translate(-"+this.stepWidth/2+"px, -"+this.stepHeight/2+"px)"),this.showArrow=!1},t.prototype.adjustLeftPosition=function(){this.leftPosition<0&&(this.arrowLeftPosition=this.arrowLeftPosition+this.leftPosition-2,this.leftPosition=2)},t.prototype.adjustRightPosition=function(){var t=document.body.clientWidth;if(this.stepAbsoluteLeft+this.stepWidth>t){var e=this.leftPosition-(this.stepAbsoluteLeft+this.stepWidth+5-t),i=e-this.leftPosition;this.leftPosition=e,this.arrowLeftPosition=this.arrowLeftPosition-i}},t.prototype.adjustTopPosition=function(){this.stepAbsoluteTop<0&&(this.arrowTopPosition=this.arrowTopPosition+this.topPosition-2,this.topPosition=2)},t.prototype.adjustBottomPosition=function(){if(this.stepAbsoluteTop+this.stepHeight>this.documentHeight){var t=this.topPosition-(this.stepAbsoluteTop+this.stepHeight+5-this.documentHeight),e=t-this.topPosition;this.topPosition=t,this.arrowTopPosition=this.arrowTopPosition-e}},t.prototype.autofixTopPosition=function(){this.positionAlreadyFixed?this.logger.warn("No step positions found for this step. The step will be centered."):this.targetAbsoluteTop-this.stepHeight-this.arrowSize<0&&(this.positionAlreadyFixed=!0,this.setStyleRight())},t.prototype.autofixRightPosition=function(){this.targetAbsoluteLeft+this.targetWidth+this.stepWidth+this.arrowSize>document.body.clientWidth&&this.setStyleBottom()},t.prototype.autofixBottomPosition=function(){this.targetAbsoluteTop+this.stepHeight+this.arrowSize+this.targetHeight>this.documentHeight&&this.setStyleLeft()},t.prototype.autofixLeftPosition=function(){this.targetAbsoluteLeft-this.stepWidth-this.arrowSize<0&&this.setStyleTop()},t.prototype.subscribeToResizeEvents=function(){var t=this;return this.eventListenerService.resizeEvent.subscribe(function(){t.redrawStep()})},t.prototype.redrawStep=function(){this.updateStepDimensions(),this.drawStep()},t.prototype.getDimensionsByAspectRatio=function(t,e,i){var o=(t+e)/(1+i);return{width:o*i,height:o}},t.prototype.adjustDimensions=function(t,e){var i=t,o=e;return t>400?o=t*e/(i=400):t<k&&(i=k,o=k/1.212),{width:i,height:o}},t.prototype.updateStepDimensions=function(){this.stepWidth=this.stepContainer.nativeElement.clientWidth,this.stepHeight=this.stepContainer.nativeElement.clientHeight},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(t){t.unsubscribe()})},s([i.Input(),p("design:type","function"==typeof(e=void 0!==a&&a)?e:Object)],t.prototype,"step",void 0),s([i.ViewChild("stepHolder"),p("design:type","function"==typeof(o=void 0!==i.ElementRef&&i.ElementRef)?o:Object)],t.prototype,"stepHolder",void 0),s([i.ViewChild("stepContainer"),p("design:type","function"==typeof(n=void 0!==i.ElementRef&&i.ElementRef)?n:Object)],t.prototype,"stepContainer",void 0),t=s([i.Component({selector:"joyride-step",template:'<div #stepHolder class="joyride-step__holder" [id]="\'joyride-step-\' + step.name" [style.top.px]="topPosition" [style.left.px]="leftPosition">\n    <joyride-arrow *ngIf="showArrow" class="joyride-step__arrow" [position]="arrowPosition" [style.top.px]="arrowTopPosition"\n        [style.left.px]="arrowLeftPosition"></joyride-arrow>\n    <div #stepContainer class="joyride-step__container">\n        <joy-close-button class="joyride-step__close" (click)="close()"></joy-close-button>\n        <div class="joyride-step__header">\n            <div class="joyride-step__title" [style.color]="themeColor">{{ title | async }}</div>\n        </div>\n        <div class="joyride-step__body">\n            <ng-container *ngTemplateOutlet="customContent ? customContent : defaultContent; context: ctx"></ng-container>\n            <ng-template #defaultContent>\n                {{ text | async }}\n            </ng-template>\n        </div>\n        <div class="joyride-step__footer">\n            <div *ngIf="isCounterVisible" class="joyride-step__counter-container">\n                <ng-container *ngTemplateOutlet="customCounter ? customCounter : defaultCounter; context: counterData"></ng-container>\n                <ng-template #defaultCounter>\n                    <div class="joyride-step__counter">{{ counter }}</div>\n                </ng-template>\n            </div>\n            <div class="joyride-step__buttons-container">\n                <div class="joyride-step__prev-container joyride-step__button" *ngIf="isPrevButtonVisible && !isFirstStep()" (click)="prev()">\n                    <ng-container *ngTemplateOutlet="customPrevButton ? customPrevButton : defaultPrevButton"></ng-container>\n                    <ng-template #defaultPrevButton>\n                        <joyride-button class="joyride-step__prev-button" [color]="themeColor">{{ prevText | async }}</joyride-button>\n                    </ng-template>\n                </div>\n                <div class="joyride-step__next-container joyride-step__button" *ngIf="!isLastStep(); else doneButton" (click)="next()">\n                    <ng-container *ngTemplateOutlet="customNextButton ? customNextButton : defaulNextButton"></ng-container>\n                    <ng-template #defaulNextButton>\n                        <joyride-button [color]="themeColor">{{ nextText | async }}</joyride-button>\n                    </ng-template>\n                </div>\n                <ng-template #doneButton>\n                    <div class="joyride-step__done-container joyride-step__button" (click)="close()">\n                        <ng-container *ngTemplateOutlet="customDoneButton ? customDoneButton : defaultDoneButton"></ng-container>\n                        <ng-template #defaultDoneButton>\n                            <joyride-button class="joyride-step__done-button" [color]="themeColor">{{ doneText | async }}</joyride-button>\n                        </ng-template>\n                    </div>\n                </ng-template>\n            </div>\n        </div>\n    </div>\n</div>',styles:[".joyride-step__holder {\n  position: absolute;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 16px;\n  z-index: 1001; }\n\n.joyride-step__arrow {\n  position: absolute;\n  left: 40px;\n  z-index: 1002; }\n\n.joyride-step__container {\n  box-sizing: border-box;\n  position: relative;\n  color: #000000;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 10px;\n  box-shadow: 0px 0px 30px 1px #000000; }\n\n.joyride-step__header {\n  display: flex;\n  align-items: center;\n  padding: 8px; }\n\n.joyride-step__title {\n  font-weight: bold;\n  font-size: 20px; }\n\n.joyride-step__close {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  width: 14px;\n  height: 14px;\n  cursor: pointer; }\n\n.joyride-step__body {\n  text-align: left;\n  padding: 10px 8px; }\n\n.joyride-step__footer {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 8px; }\n\n.joyride-step__buttons-container {\n  display: flex;\n  flex-direction: row; }\n\n.joyride-step__button:first-child {\n  margin-right: 2.5px; }\n\n.joyride-step__button:last-child {\n  margin-left: 2.5px; }\n\n.joyride-step__counter {\n  font-weight: bold;\n  font-size: 14px; }\n\n.joyride-step__counter-container {\n  margin-right: 10px; }\n"],encapsulation:i.ViewEncapsulation.None}),p("design:paramtypes",["function"==typeof(r=void 0!==i.Injector&&i.Injector)?r:Object,"function"==typeof(c=void 0!==w&&w)?c:Object,"function"==typeof(h=void 0!==P&&P)?h:Object,"function"==typeof(u=void 0!==O&&O)?u:Object,"function"==typeof(l=void 0!==i.Renderer2&&i.Renderer2)?l:Object,"function"==typeof(d=void 0!==g&&g)?d:Object,"function"==typeof(f=void 0!==y&&y)?f:Object,"function"==typeof(v=void 0!==T&&T)?v:Object])],t)}(),D=function(){function t(t,e,i){this.componentFactoryResolver=t,this.appRef=e,this.injector=i,this.refMap={}}var e,o,n;return t.prototype.draw=function(t){var e=this.componentFactoryResolver.resolveComponentFactory(A).create(this.injector);this.appRef.attachView(e.hostView);var i=e.hostView.rootNodes[0];document.body.appendChild(i);var o=e.instance;o.step=t,e.changeDetectorRef.detectChanges(),t.stepInstance=o,this.refMap[t.name]=e},t.prototype.remove=function(t){this.appRef.detachView(this.refMap[t.name].hostView),this.refMap[t.name].destroy()},t=s([i.Injectable(),p("design:paramtypes",["function"==typeof(e=void 0!==i.ComponentFactoryResolver&&i.ComponentFactoryResolver)?e:Object,"function"==typeof(o=void 0!==i.ApplicationRef&&i.ApplicationRef)?o:Object,"function"==typeof(n=void 0!==i.Injector&&i.Injector)?n:Object])],t)}(),R=15,I=10,H=function(){function o(t,i,o,n,r,s,p,c,h){this.backDropService=t,this.eventListener=i,this.stepsContainerService=o,this.documentService=n,this.DOMService=r,this.stepDrawerService=s,this.optionsService=p,this.router=c,this.logger=h,this.winTopPosition=0,this.winBottomPosition=0,this.stepsObserver=new e.ReplaySubject,this.initViewportPositions(),this.subscribeToScrollEvents(),this.subscribeToResizeEvents()}var r,c,h,a,u,l,d,f,v;return o.prototype.initViewportPositions=function(){this.winTopPosition=0,this.winBottomPosition=this.DOMService.getNativeWindow().innerHeight-20},o.prototype.subscribeToScrollEvents=function(){var t=this;this.eventListener.startListeningScrollEvents(),this.eventListener.scrollEvent.subscribe(function(e){t.winTopPosition=e.scrollY,t.winBottomPosition=t.winTopPosition+t.DOMService.getNativeWindow().innerHeight-20,t.currentStep&&t.backDropService.redraw(t.currentStep,e)})},o.prototype.subscribeToResizeEvents=function(){var t=this;this.eventListener.resizeEvent.subscribe(function(){t.currentStep&&t.backDropService.redrawTarget(t.currentStep)})},o.prototype.drawStep=function(t){t.position=t.position===C?this.optionsService.getStepDefaultPosition():t.position,this.stepDrawerService.draw(t)},o.prototype.startTour=function(){return this.stepsObserver=new e.ReplaySubject,this.stepsContainerService.init(),this.documentService.setDocumentHeight(),this.tryShowStep(t.StepActionType.NEXT),this.eventListener.startListeningResizeEvents(),this.subscribeToStepsUpdates(),this.stepsObserver.asObservable()},o.prototype.close=function(){this.removeCurrentStep(),this.notifyTourIsFinished(),this.DOMService.getNativeWindow().scrollTo(0,0),this.eventListener.stopListeningResizeEvents(),this.backDropService.remove()},o.prototype.prev=function(){this.removeCurrentStep(),this.currentStep.prevCliked.emit(),this.tryShowStep(t.StepActionType.PREV)},o.prototype.next=function(){this.removeCurrentStep(),this.currentStep.nextClicked.emit(),this.tryShowStep(t.StepActionType.NEXT)},o.prototype.navigateToStepPage=function(t){var e=this.stepsContainerService.getStepRoute(t);e&&this.router.navigate([e])},o.prototype.subscribeToStepsUpdates=function(){var t=this;this.stepsContainerService.stepHasBeenModified.subscribe(function(e){t.currentStep&&t.currentStep.name===e.name&&(t.currentStep=e)})},o.prototype.tryShowStep=function(t){var e=this;this.navigateToStepPage(t);var i=this.optionsService.getWaitingTime();i>100&&this.backDropService.remove(),setTimeout(function(){try{e.showStep(t)}catch(i){if(i instanceof m)e.tryShowStep(t);else{if(!(i instanceof S))throw new Error(i);e.logger.error("Forcing the tour closure: First or Last step not found in the DOM."),e.close()}}},i)},o.prototype.showStep=function(t){if(this.currentStep=this.stepsContainerService.get(t),null==this.currentStep)throw new m("");this.scrollIfElementBeyondOtherElements(),this.backDropService.draw(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible(),this.notifyStepClicked(t)},o.prototype.notifyStepClicked=function(t){var e={number:this.stepsContainerService.getStepNumber(this.currentStep.name),name:this.currentStep.name,route:this.currentStep.route,actionType:t};this.stepsObserver.next(e)},o.prototype.notifyTourIsFinished=function(){this.currentStep&&this.currentStep.tourDone.emit(),this.stepsObserver.complete()},o.prototype.removeCurrentStep=function(){this.currentStep&&this.stepDrawerService.remove(this.currentStep)},o.prototype.scrollIfStepAndTargetAreNotVisible=function(){this.scrollWhenTargetOrStepAreHiddenBottom(),this.scrollWhenTargetOrStepAreHiddenTop()},o.prototype.scrollWhenTargetOrStepAreHiddenBottom=function(){var t=this.getMaxTargetAndStepBottomPosition();t>this.winBottomPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winBottomPosition)},o.prototype.scrollWhenTargetOrStepAreHiddenTop=function(){var t=this.getMaxTargetAndStepTopPosition();t<this.winTopPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winTopPosition)},o.prototype.getMaxTargetAndStepBottomPosition=function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight:"bottom"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight+this.currentStep.stepInstance.stepHeight+I+R:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.max(t+this.currentStep.stepInstance.targetHeight,t+this.currentStep.stepInstance.targetHeight/2+this.currentStep.stepInstance.stepHeight/2):void 0},o.prototype.getMaxTargetAndStepTopPosition=function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t-(this.currentStep.stepInstance.stepHeight+I+R):"bottom"===this.currentStep.position?t:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.min(t,t+this.currentStep.stepInstance.targetHeight/2-this.currentStep.stepInstance.stepHeight/2):void 0},o.prototype.scrollIfElementBeyondOtherElements=function(){this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed)},o.prototype.isElementBeyondOthers=function(){return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed,"backdrop")},o.prototype.refreshTour=function(){this.currentStep&&(this.scrollIfElementBeyondOtherElements(),this.backDropService.redrawTarget(this.currentStep),this.stepDrawerService.remove(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible())},o=s([i.Injectable(),p("design:paramtypes",["function"==typeof(r=void 0!==j&&j)?r:Object,"function"==typeof(c=void 0!==P&&P)?c:Object,"function"==typeof(h=void 0!==w&&w)?h:Object,"function"==typeof(a=void 0!==O&&O)?a:Object,"function"==typeof(u=void 0!==x&&x)?u:Object,"function"==typeof(l=void 0!==D&&D)?l:Object,"function"==typeof(d=void 0!==y&&y)?d:Object,"function"==typeof(f=void 0!==n.Router&&n.Router)?f:Object,"function"==typeof(v=void 0!==g&&g)?v:Object])],o)}(),L=function(t,e){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function M(t,e){function i(){this.constructor=t}L(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var F,N={e:{}};function W(){try{return F.apply(this,arguments)}catch(t){return N.e=t,N}}function V(t){return F=t,W}function z(t){return"function"==typeof t}var U=!1,X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;U=t},get useDeprecatedSynchronousErrorHandling(){return U}};function Y(t){setTimeout(function(){throw t})}var J={closed:!0,next:function(t){},error:function(t){if(X.useDeprecatedSynchronousErrorHandling)throw t;Y(t)},complete:function(){}},$=Array.isArray||function(t){return t&&"number"==typeof t.length};function q(t){return null!=t&&"object"==typeof t}var G=function(t){function e(i){var o=t.call(this,i?i.length+" errors occurred during unsubscription:\n  "+i.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return o.errors=i,o.name="UnsubscriptionError",Object.setPrototypeOf(o,e.prototype),o}return M(e,t),e}(Error),K=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,o=this._parents,n=this._unsubscribe,r=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,p=o?o.length:0;i;)i.remove(this),i=++s<p&&o[s]||null;if(z(n))V(n).call(this)===N&&(e=!0,t=t||(N.e instanceof G?Z(N.e.errors):[N.e]));if($(r))for(s=-1,p=r.length;++s<p;){var c=r[s];if(q(c))if(V(c.unsubscribe).call(c)===N){e=!0,t=t||[];var h=N.e;h instanceof G?t=t.concat(Z(h.errors)):t.push(h)}}if(e)throw new G(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var o=i;(i=new t)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function Z(t){return t.reduce(function(t,e){return t.concat(e instanceof G?e.errors:e)},[])}var Q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",tt=function(t){function e(e,i,o){var n=t.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=J;break;case 1:if(!e){n.destination=J;break}if("object"==typeof e){if(it(e)){var r=e[Q]();n.syncErrorThrowable=r.syncErrorThrowable,n.destination=r,r.add(n)}else n.syncErrorThrowable=!0,n.destination=new et(n,e);break}default:n.syncErrorThrowable=!0,n.destination=new et(n,e,i,o)}return n}return M(e,t),e.prototype[Q]=function(){return this},e.create=function(t,i,o){var n=new e(t,i,o);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(K),et=function(t){function e(e,i,o,n){var r,s=t.call(this)||this;s._parentSubscriber=e;var p=s;return z(i)?r=i:i&&(r=i.next,o=i.error,n=i.complete,i!==J&&(z((p=Object.create(i)).unsubscribe)&&s.add(p.unsubscribe.bind(p)),p.unsubscribe=s.unsubscribe.bind(s))),s._context=p,s._next=r,s._error=o,s._complete=n,s}return M(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;X.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=X.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):Y(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;Y(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};X.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),X.useDeprecatedSynchronousErrorHandling)throw t;Y(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!X.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return X.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Y(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(tt);function it(t){return t instanceof tt||"syncErrorThrowable"in t&&t[Q]}"function"==typeof Symbol&&Symbol.observable;Error,Error;var ot=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new nt(t,this.callback))},t}(),nt=function(t){function e(e,i){var o=t.call(this,e)||this;return o.add(new K(i)),o}return M(e,t),e}(tt);Error;Error;var rt=function(){return function(){}}(),st=function(){function t(t,e,i){this.platformId=t,this.stepService=e,this.optionsService=i,this.tourInProgress=!1}var n,r,h;return t.prototype.startTour=function(t){var i,n=this;return o.isPlatformBrowser(this.platformId)?(this.tourInProgress||(this.tourInProgress=!0,t&&this.optionsService.setOptions(t),this.tour$=this.stepService.startTour().pipe((i=function(){return n.tourInProgress=!1},function(t){return t.lift(new ot(i))})),this.tour$.subscribe()),this.tour$):e.of(new rt)},t.prototype.closeTour=function(){this.isTourInProgress()&&this.stepService.close()},t.prototype.isTourInProgress=function(){return this.tourInProgress},t=s([i.Injectable(),c(0,i.Inject(i.PLATFORM_ID)),p("design:paramtypes",["function"==typeof(n="undefined"!=typeof Object&&Object)?n:Object,"function"==typeof(r=void 0!==H&&H)?r:Object,"function"==typeof(h=void 0!==y&&y)?h:Object])],t)}(),pt=function(){function t(){this.clicked=new i.EventEmitter}var e;return t.prototype.onClick=function(){this.clicked.emit()},s([i.Input(),p("design:type",String)],t.prototype,"color",void 0),s([i.Output(),p("design:type","function"==typeof(e=void 0!==i.EventEmitter&&i.EventEmitter)?e:Object)],t.prototype,"clicked",void 0),t=s([i.Component({selector:"joyride-button",template:"<button (mouseleave)=\"hover=false\" (mouseover)=\"hover=true\"\n    [ngStyle]=\"{'background-color': hover ? '#fff' : color, \n                'color': hover ? color : '#fff',\n                'border-color' : hover ? color : 'transparent'}\"\n    class=\"joyride-button\" (click)=\"onClick()\">\n    <ng-content></ng-content>\n</button>",styles:[".joyride-button {\n  text-transform: uppercase;\n  border: 2px solid transparent;\n  outline: none;\n  padding: 6px 12px;\n  font-size: 12px;\n  font-weight: bold;\n  color: white;\n  background-color: #3b5560;\n  cursor: pointer; }\n  .joyride-button:hover {\n    color: #3b5560;\n    border: 2px solid #3b5560;\n    background-color: white; }\n"]})],t)}(),ct=function(){function t(){}return t=s([i.Component({selector:"joy-close-button",template:'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">\n                <line x1="1" y1="24" \n                    x2="24" y2="1" \n                    stroke="black" \n                    stroke-width="3"/>\n                <line x1="1" y1="1" \n                    x2="24" y2="24" \n                    stroke="black" \n                    stroke-width="3"/>\n            </svg>'})],t)}(),ht=function(){function t(){this.position="top"}return s([i.Input(),p("design:type",String)],t.prototype,"position",void 0),t=s([i.Component({selector:"joyride-arrow",template:"<div [class.joyride-arrow__top]=\"position == 'top'\"\n     [class.joyride-arrow__bottom]=\"position == 'bottom'\"\n     [class.joyride-arrow__left]=\"position == 'left'\"\n     [class.joyride-arrow__right]=\"position == 'right'\">\n</div>",styles:[".joyride-arrow__top {\n  border-left: 11px solid transparent;\n  border-right: 11px solid transparent;\n  border-bottom: 11px solid #ffffff; }\n\n.joyride-arrow__bottom {\n  border-left: 11px solid transparent;\n  border-right: 11px solid transparent;\n  border-top: 11px solid #ffffff; }\n\n.joyride-arrow__right {\n  border-left: 11px solid #ffffff;\n  border-bottom: 11px solid transparent;\n  border-top: 11px solid transparent; }\n\n.joyride-arrow__left {\n  border-right: 11px solid #ffffff;\n  border-top: 11px solid transparent;\n  border-bottom: 11px solid transparent; }\n"],encapsulation:i.ViewEncapsulation.None})],t)}(),at=n.RouterModule.forChild([]),ut=function(){function t(){}var e;return e=t,t.forRoot=function(){return{ngModule:e,providers:[st,H,w,j,P,O,y,D,x,g,T]}},t.forChild=function(){return{ngModule:e,providers:[]}},t=e=s([i.NgModule({imports:[o.CommonModule,at],declarations:[E,A,ht,pt,ct],entryComponents:[A],exports:[E]})],t)}();t.routerModuleForChild=at,t.JoyrideModule=ut,t.JoyrideService=st,t.NO_POSITION=C,t.JoyrideDirective=E,t.DISTANCE_FROM_TARGET=R,t.ARROW_SIZE=I,t.JoyrideStepService=H,t.JoyrideBackdropService=j,t.Scroll=_,t.EventListenerService=P,t.JoyrideStepsContainerService=w,t.DocumentService=O,t.DEFAULT_THEME_COLOR=u,t.STEP_DEFAULT_POSITION=l,t.DEFAULT_TIMEOUT_BETWEEN_STEPS=1,t.DEFAULT_TEXTS=f,t.ObservableCustomTexts=d,t.JoyrideOptionsService=y,t.StepDrawerService=D,t.DomRefService=x,t.LoggerService=g,t.TemplatesService=T,t.DEFAULT_DISTANCE_FROM_MARGIN_TOP=2,t.DEFAULT_DISTANCE_FROM_MARGIN_LEFT=2,t.JoyrideStepComponent=A,t.JoyrideArrowComponent=ht,t.JoyrideButtonComponent=pt,t.JoyrideCloseButtonComponent=ct,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-joyride.umd.js.map
